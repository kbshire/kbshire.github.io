



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="Hexo" href="http://example.com/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="Hexo" href="http://example.com/atom.xml" />
<link rel="alternate" type="application/json" title="Hexo" href="http://example.com/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="网络" />


<link rel="canonical" href="http://example.com/2023/09/01/border%20leaf/">



  <title>
从三层架构到spine leaf - 网络 |
Yume Shoka = Hexo</title>
<meta name="generator" content="Hexo 5.4.2"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">从三层架构到spine leaf
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2023-09-01 13:38:45">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2023-09-01T13:38:45+08:00">2023-09-01</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Yume Shoka</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/db2a95362955b963ac39e3b449f84fa0.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/dcd5178b4c81cd15d7465af2a33c0d6d.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/08909482bc207d17564c06ef2496e12f.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/d10b26588ca1fe939f0146bb24578eaa.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/2642d17296be87c670c540b75c0562b3.jpg"></li>
          <li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/009ee927d495427d088feacdda5589be.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E7%BD%91%E7%BB%9C/" itemprop="item" rel="index" title="In 网络"><span itemprop="name">网络</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/01/border%20leaf/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="John Doe">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="从三层架构到spine-leaf"><a class="markdownIt-Anchor" href="#从三层架构到spine-leaf">#</a> 从三层架构到 spine leaf</h1>
<p>为了应付一些数据中心客户购买 waf 的需求，因此在这里记录一下一种数据中心组网。</p>
<p>客户采用的组网图如下：两台 waf 是准备放在 fw 所在的 service leaf 中，但是存在问题，后续会更新组网图</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230905221001563.png" alt="image-20230905221001563"></p>
<h2 id="传统三层架构"><a class="markdownIt-Anchor" href="#传统三层架构">#</a> 传统三层架构</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230905221134755.png" alt="image-20230905221134755"></p>
<p>这种架构由核心路由器、聚合路由器（有时叫分发路由器，distribution routers  ）和接入交换机组成。在接入交换机和聚合路由器之间运行生成树协议（Spanning Tree  Protocol，STP），以保证网络的二层部分（L2）没有环路。STP 有许多好处：简单，  即插即用（plug-and-play），只需很少配置。每个 pod 内的机器都属于同一个 VLAN， 因此服务器无需修改 IP  地址和网关就可以在 pod 内部任意迁移位置。但是，STP 无法 使用并行转发路径（parallel forwarding  path），它永远会禁用 VLAN 内的冗余路径。</p>
<p>核心层：核心层是网络的高速交换主干，对整个网络的连通起到至关重要的作用。核心层应该具有如下几个特性：可靠性、高效性、冗余性、容错性、可管理性、适应性、低延时性等。在核心层中，应该采用高带宽的千兆以上交换机。因为核心层是网络的枢纽中心，重要性突出。核心层设备采用双机冗余热备份是非常必要的，也可以使用负载均衡功能，来改善网络性能。</p>
<p>汇聚层：汇聚层是网络接入层和核心层的 “中介”，就是在工作站接入核心层前先做汇聚，以减轻核心层设备的负荷。汇聚层具有实施策略、安全、工作组接入、虚拟局域网（VLAN）之间的路由、源地址或目的地址过滤等多种功能。在汇聚层中，应该选用支持三层交换技术和 VLAN 的交换机，以达到网络隔离和分段的目的。</p>
<p>接入层：接入层向本地网段提供工作站接入。在接入层中，减少同一网段的工作站数量，能够向工作组提供高速带宽。接入层可以选择不支持 VLAN 和三层交换技术的普通交换机。</p>
<p>并且在这种组网中如果预算有限可以使用二层交换机作为接入层交换机减少预算，在关键的核心选择性能较高的设备加速转发。现网中大量运用三层交换机，三层交换机也可以作为出口设备，代替了很多路由器的功能。但是要注意：路由器的交换机是有本质区别的！</p>
<p>在不同 vlan 互访的时候涉及到网关的规划。网关可以选择放在核心，汇聚，甚至接入都可以。网关放在不同的地方有不同的好处，比如放在汇聚或接入可以减少流量迂回。放在 core 上会产生大量的 arp 表项导致网络瓶颈等。</p>
<p>三层架构优点：采用三层架构，可以在不同层做不同的规划，比如汇聚层做安全策略等，并且可以实现各层的冗余，使网络的安全性和可靠性大幅增加。stp 可以防止广播风暴，可以节约一定的成本，具有一定的扩展性。比如最开始说到的 waf 的案例，我们就可以选择在核心或者汇聚旁挂，做反向代理访问后端 web server。</p>
<p>缺点：stp 永远会阻塞一条冗余链路，这在数据中心中 10G 甚至更高的带宽的场景下这种阻塞对链路带宽浪费是巨大的。对于东西向流量 (稍后会在 spine-leaf 中提及) 会产生传输瓶颈，因为经过了大量的多余节点，会产生非常明显的性能衰减。</p>
<p>使用场景：校园网，比如掀石油大学采用的就是三层架构。将接入直接连接同学的电脑，汇聚和接入放在每幢楼的机房，在学校 xx 位置有一个核心机房放置核心层交换机。企业网，便于管理</p>
<p>一些提供冗余的技术：VRRP (HSRP) Etrunk 链路捆绑 堆叠  双电源</p>
<h2 id="spine-leaf"><a class="markdownIt-Anchor" href="#spine-leaf">#</a> spine-leaf</h2>
<p>早期数据中心的流量有 80% 为横向（east-west，南北）流量，随着云计算、分布式架构的发展，现在已经转变为 70%  为纵向（north-south，东西）流量</p>
<p>随着云计算的到来，越来越丰富的业务对数据中心的流量模型产生了巨大的冲击，如搜索、并行计算等业务，需要大量的服务器组成集群系统，协同完成工作，这导致服务器之间的流量变得非常大。比如搜索，用户只是发出一个搜索指令，服务器集群就在海量数据面前进行搜索与计算，这个过程是非常复杂的，而只是将结果传递给用户。早期数据中心主要满足外部对数据中心的访问，所以流量就以 “南北” 为主。这种流量模型受到了出口带宽的限制，一般的数据中心访问都会存在收敛比，即网络接入带宽比较大，而出口带宽比较小，访问的速度无法提升，在业务高峰期时，用户访问数据中心的体验感下降，这种网络模型已经不适应现今数据中心的发展需要。三层架构的另一个问题是服务器到服务器延迟（server-to-server latency）随着流量路 径的不同而不同。</p>
<p>针对以上问题，提出了一种新的数据中心设计，称作基于 Clos 网络的 Spine-and-Leaf 架 构（Clos network-based Spine-and-Leaf architecture）。事实已经证明，这种架构可 以提供高带宽、低延迟、非阻塞的服务器到服务器连接。</p>
<h3 id="一些概念"><a class="markdownIt-Anchor" href="#一些概念">#</a> 一些概念</h3>
<p><strong>流量方向</strong></p>
<p>东西流量指的就是横向流量 ------- 例如：服务器与服务器之间交换流量</p>
<p>南北流量指的就是纵向流量 ------- 例如：客户端和服务器之间的流量</p>
<p>跨数据中心流量：不同数据中心的流量，例如数据中心之间的灾备，私有云和公有云之间的通讯。</p>
<p><strong>leaf 种类</strong></p>
<p>Leaf 分为三类：在设计的时候就要区分</p>
<p>server leaf     应用       （连接服务器这些）</p>
<p>service leaf   增值服务（连接防火墙这些）</p>
<p>border leaf    边界       （连接路由器这些）— 可以去外网，也可以去另一个内网（另一个数据中心）</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/3b7f1262fd704fc4966335f3a3e9b495.png" alt="img"></p>
<p><strong>Fabric</strong>：物理设备组成的网络，一般就指一个数据中心网络</p>
<p>​       Fabric 扩展（多个 Fabric 通过核心交换机连接在一起）</p>
<p>​       多个小的数据中心，通过一个逻辑的大二层组成一个数据中心</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/aa3132a9835340f181316de7449cd9af.png" alt="img"></p>
<p><strong>收敛比</strong></p>
<p>通常的，使用一个网络架构中的所有南向 (下行）接口的总带宽比上所有北向 (上行) 接口的总带宽来表示。</p>
<p><strong>vpc</strong></p>
<p>VPC（Virtual Port Channel）是思科网络设备中的一项技术，它允许两台交换机（通常是核心交换机）之间形成一个逻辑的端口通道，并将它们看作是一台逻辑交换机，再连接到其他设备。其他设备包括：Nexus 2000 系列的 Fabric  Extender（后文暂且翻译为结构扩展器），交换机，服务器等其他任何的网络设备。vPC 技术可以提供二层的多路径选择，让用户可以在有多条可选路径的情况下增加网络冗余度，同时实现提升带宽、在多个节点之间启用多条并行路径和对流量进行负载均衡。VPC 技术能够提高网络可靠性和可用性，同时还可以提供更好的性能和灵活性。</p>
<p>使用 VPC 技术时，两台交换机之间需要配置一个双向的 peer-link 通道，peer-link 通道可以使用多个物理接口进行绑定。vPC 域内包含 vPC 端设备，vPC 对端 keepalive 链路，vPC 对端互联链路，以及所有在 vPC 域下的 PortChannel。每个 VPC 域内，可以将多个物理接口绑定成一个逻辑的 VPC 端口通道，以提供更高的带宽和可靠性。VPC 端口通道会同时连接到两台交换机上，但只会使用其中一台交换机进行数据传输，这样可以避免网络中出现环路。</p>
<p>在 VPC 技术中，交换机之间会同步 MAC 地址、VLAN 信息等状态信息，以保证网络的一致性和可用性。此外，VPC 技术还提供了一些高可用性的功能，例如 peer-gateway 和 peer-switch 等，以保证在交换机发生故障时可以快速地切换到备用交换机上，保证网络的可靠性和连通性。</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230905224024717.png" alt="image-20230905224024717"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/v2-05fe95c7e89f30361e8fe63abc8d825b_720w.webp" alt="img"></p>
<h3 id="spine-leaf架构"><a class="markdownIt-Anchor" href="#spine-leaf架构">#</a> spine-leaf 架构</h3>
<p>在以上两级 Clos 架构中，每个低层级的交换机（leaf）都会连接到每个高层级的交换机 （spine），形成一个 full-mesh  拓扑。leaf 层由接入交换机组成，用于连接服务器等 设备。spine 层是网络的骨干（backbone），负责将所有的 leaf 连接起来。  fabric 中的每个 leaf 都会连接到每个 spine，如果一个 spine 挂了，数据中心的吞吐性 能只会有轻微的下降（slightly degrade）。</p>
<p>如果某个链路被打满了，扩容过程也很直接：添加一个 spine 交换机就可以扩展每个 leaf 的上行链路，增大了 leaf 和 spine 之间的带宽，缓解了链路被打爆的问题。如果接入层 的端口数量成为了瓶颈，那就直接添加一个新的 leaf，然后将其连接到每个 spine 并做相  应的配置即可。这种易于扩展（ease of expansion）的特性优化了 IT 部门扩展网络的过 程。leaf  层的接入端口和上行链路都没有瓶颈时，这个架构就实现了无阻塞（nonblocking）。</p>
<p>在 Spine-and-Leaf 架构中，任意一个服务器到另一个服务器的连接，都会经过相同数量 的设备（除非这两个服务器在同一 leaf 下面），这保证了延迟是可预测的，因为一个包 只需要经过一个 spine 和另一个 leaf 就可以到达目的端。</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/4-spine-leaf.PNG" alt="img"></p>
<h3 id="spine-leaf优势"><a class="markdownIt-Anchor" href="#spine-leaf优势">#</a> spine leaf 优势</h3>
<p><strong>扁平化</strong>：扁平化设计缩短服务器之间的通信路径，从而降低延迟，可以显著提高应用程序和服务性能。</p>
<p><strong>易扩展</strong>：如果 Spine 交换机的带宽不足，我们只需要增加 Spine 节点数，也可以提供路径上的负载均衡；如果接入连接不足，则只需增加 Leaf 节点数。<br>
低收敛比：容易实现 1:X 甚至是无阻塞的 1:1 的收敛比，而且通过增加 Spine 和 Leaf 设备间的链路带宽也可以降低链路收敛比。</p>
<p><strong>简化管理</strong>：叶脊结构可以在无环路环境中使用全网格中的每个链路并进行负载平衡，这种等价多路径设计，在使用 SDN 等集中式网络管理平台时处于最佳状态。SDN  允许在发生堵塞或链路故障时简化流量的配置，管理和重新分配路由，使得智能负载均衡的全网状拓扑成为一个相对简单的配置和管理方式。</p>
<p><strong>边缘流量处理</strong>：随着物联网（IoT）等业务的兴起，接入层压力剧增，可能有数千个传感器和设备在网络边缘连接并产生大量流量。Leaf 可以在接入层处理连接，Spine 保证节点内的任意两个端口之间提供延迟非常低的无阻塞性能，从而实现从接入到云平台的敏捷服务。</p>
<p><strong>多云管理</strong>：数据中心或云之间通过 Leaf Spine 架构仍可以实现高性能、高容错等优势，而多云管理策略也逐渐成为企业的必选项。</p>
<h2 id="overlay"><a class="markdownIt-Anchor" href="#overlay">#</a> overlay</h2>
<p>现代虚拟化数据中心的网络要加速应用部署和支持 DevOps，必须满足特定的前提 条件。例如，需要支持扩展转发表、扩展网段、L2 segment  extension、虚拟设备漂移（mobility）、转发路径优化、共享物理基础设施上的网络虚拟 化和多租户等等。</p>
<ul>
<li>VXLAN：Virtual Extensible LAN</li>
<li>NVGRE: Network Virtualization Using Generic Routing Encapsulation</li>
<li>TRILL: Transparent Interconnection of Lots of Links</li>
<li>LISP: Location/Identifier Separation Protocol</li>
</ul>
<p>overlay 网络是共享底层网络（underlay network）的节点之间互连形成的虚拟网络，这使 得在不修改底层（underlay）网络的情况下，可以部署对网络拓扑有特定要求的应用</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlqaWFoYW8uYmFpZHUuY29tL3M/aWQ9MTc1MTA2NTE0Nzg0MDgzNTU0NSZhbXA7d2ZyPXNwaWRlciZhbXA7Zm9yPXBj">https://baijiahao.baidu.com/s?id=1751065147840835545&amp;wfr=spider&amp;for=pc</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZHJlYW0zOTcvcC8xMjg2OTU0Ny5odG1s">https://www.cnblogs.com/dream397/p/12869547.html</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ5ODY0MTEwL2FydGljbGUvZGV0YWlscy8xMjM3NjU5MDg=">https://blog.csdn.net/m0_49864110/article/details/123765908</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ptaWxrL2FydGljbGUvZGV0YWlscy8xMjE3NDE2MDA=">https://blog.csdn.net/Jmilk/article/details/121741600</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lmh1YXdlaS5jb20vZW50ZXJwcmlzZS96aC9kb2MvRURPQzExMDAwMjM1NDM/c2VjdGlvbj1qMDBx">https://support.huawei.com/enterprise/zh/doc/EDOC1100023543?section=j00q</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZHJlYW0zOTcvcC8xMjg2OTU0Ny5odG1s">https://www.cnblogs.com/dream397/p/12869547.html</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9iYWlqaWFoYW8uYmFpZHUuY29tL3M/aWQ9MTc2MjY4MzgyMjQ2NTg2MTQ4MyZhbXA7d2ZyPXNwaWRlciZhbXA7Zm9yPXBj">https://baijiahao.baidu.com/s?id=1762683822465861483&amp;wfr=spider&amp;for=pc</span></p>
<p><span class="exturl" data-url="aHR0cDovL3d3dy50YW9kdWR1LmNjL25ld3Mvc2hvdy00NDQxNDI5Lmh0bWw/YWN0aW9uPW9uQ2xpY2s=">http://www.taodudu.cc/news/show-4441429.html?action=onClick</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC84MjAzNzM5NA==">https://zhuanlan.zhihu.com/p/82037394</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20veWlwaWFuY2h1eXVuL3AvMTM4NDIyOTcuaHRtbA==">https://www.cnblogs.com/yipianchuyun/p/13842297.html</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9hcmNoaXRlY3QucHViL2Jvb2svZXhwb3J0L2h0bWwvODM2">https://architect.pub/book/export/html/836</span></p>

      <div class="tags">
          <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"><i class="ic i-tag"></i> 网络</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2024-01-02 23:02:01" itemprop="dateModified" datetime="2024-01-02T23:02:01+08:00">2024-01-02</time>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> Donate</button>
  <p>Give me a cup of [coffee]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="John Doe WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="John Doe Alipay">
        <p>Alipay</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="John Doe PayPal">
        <p>PayPal</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>Post author:  </strong>John Doe <i class="ic i-at"><em>@</em></i>Hexo
  </li>
  <li class="link">
    <strong>Post link: </strong>
    <a href="http://example.com/2023/09/01/border%20leaf/" title="从三层架构到spine leaf">http://example.com/2023/09/01/border leaf/</a>
  </li>
  <li class="license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/08/22/%E5%8E%BB%E5%BC%B9%E7%AA%97%E7%BB%BF%E5%8C%96/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;c42b981631c2a7ddaed6e13bd5847ebb.jpg" title="破解相关">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> 逆向</span>
  <h3>破解相关</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/09/15/%E7%BC%93%E5%AD%98%E6%B1%A1%E6%9F%93/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;65d0bfef68566882ce0560cab2e87921.jpg" title="缓存污染&#x2F;请求走私">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>缓存污染/请求走私</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8E%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E5%88%B0spine-leaf"><span class="toc-number">1.</span> <span class="toc-text"> 从三层架构到 spine leaf</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text"> 传统三层架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spine-leaf"><span class="toc-number">1.2.</span> <span class="toc-text"> spine-leaf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 一些概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spine-leaf%E6%9E%B6%E6%9E%84"><span class="toc-number">1.2.2.</span> <span class="toc-text"> spine-leaf 架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spine-leaf%E4%BC%98%E5%8A%BF"><span class="toc-number">1.2.3.</span> <span class="toc-text"> spine leaf 优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#overlay"><span class="toc-number">1.3.</span> <span class="toc-text"> overlay</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/2023/01/17/Segment%20Routing/" rel="bookmark" title="Segment Routing">Segment Routing</a></li><li><a href="/2023/01/20/VXLAN/" rel="bookmark" title="VXLAN">VXLAN</a></li><li class="active"><a href="/2023/09/01/border%20leaf/" rel="bookmark" title="从三层架构到spine leaf">从三层架构到spine leaf</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="John Doe"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">John Doe</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">62</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">8</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">8</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/08/22/%E5%8E%BB%E5%BC%B9%E7%AA%97%E7%BB%BF%E5%8C%96/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/09/15/%E7%BC%93%E5%AD%98%E6%B1%A1%E6%9F%93/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>Random Posts</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%BF%90%E7%BB%B4/" title="In 运维">运维</a>
</div>

    <span><a href="/2023/05/20/Kubernetes/" title="Kubernetes">Kubernetes</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%BD%91%E7%BB%9C/" title="In 网络">网络</a>
</div>

    <span><a href="/2023/01/17/Segment%20Routing/" title="Segment Routing">Segment Routing</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" title="In 大数据">大数据</a>
</div>

    <span><a href="/2024/11/01/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%94%9F%E6%80%81%E6%A6%82%E8%AE%BA/" title="大数据生态概论">大数据生态概论</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%BF%90%E7%BB%B4/" title="In 运维">运维</a>
</div>

    <span><a href="/2024/02/01/%E7%9B%91%E6%8E%A7/" title="监控">监控</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%A7%8B%E6%8B%9B/" title="In 秋招">秋招</a>
</div>

    <span><a href="/2022/10/28/%E7%A7%8B%E6%8B%9B%E9%9D%A2%E8%AF%95%E9%A2%98/" title="秋招面试题">秋招面试题</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" title="In 大模型">大模型</a>
</div>

    <span><a href="/2025/02/01/Deepseek%E6%B1%87%E6%80%BB/" title="Deepseek汇总">Deepseek汇总</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/04/16/Upload/" title="File upload">File upload</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/07/15/%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E/" title="中间件漏洞">中间件漏洞</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%BF%90%E7%BB%B4/" title="In 运维">运维</a>
</div>

    <span><a href="/2022/11/27/CDN/" title="CDN&amp;DNS">CDN&DNS</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%BF%90%E7%BB%B4/" title="In 运维">运维</a>
</div>

    <span><a href="/2023/04/15/Nginx_new/" title="Nginx">Nginx</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>Recent Comments</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">John Doe @ Yume Shoka</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/09/01/border leaf/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    copyright: 'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
