



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="Hexo" href="http://example.com/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="Hexo" href="http://example.com/atom.xml" />
<link rel="alternate" type="application/json" title="Hexo" href="http://example.com/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="逆向" />


<link rel="canonical" href="http://example.com/2023/01/03/%E6%BB%B4%E6%B0%B4reverse/">



  <title>
水滴rev - 逆向 |
Yume Shoka = Hexo</title>
<meta name="generator" content="Hexo 5.4.2"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">水滴rev
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2023-01-03 13:38:45">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2023-01-03T13:38:45+08:00">2023-01-03</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">Yume Shoka</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicitspjpbj20zk0m81ky.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicm0fdw5cj20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclip4jbpj20zk0m87cv.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipew28b65j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclh5u05ej20zk0m87df.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giph47e9vtj20zk0m8x6l.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E9%80%86%E5%90%91/" itemprop="item" rel="index" title="In 逆向"><span itemprop="name">逆向</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/03/%E6%BB%B4%E6%B0%B4reverse/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="John Doe">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Hexo">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="reverse"><a class="markdownIt-Anchor" href="#reverse">#</a> reverse</h1>
<h2 id="公开课"><a class="markdownIt-Anchor" href="#公开课">#</a> 公开课</h2>
<p>PE 文件结构</p>
<p>任何一个在 Windows 上运行的可执行文件都要遵守一定的格式，这个格式就是 PE 文件结构，比如:exe, dIl, 部分 sys</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/20191105010140189.png" alt="img"></p>
<p>此处可使用 PEID 或 ExeinfoPE 进行代替</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221210120028888.png" alt="image-20221210120028888"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221210132659775.png" alt="image-20221210132659775"></p>
<p>32 位计算机最大内存 4G，寻址宽度 32 位</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221210141922512.png" alt="image-20221210141922512"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221210141955667.png" alt="image-20221210141955667"></p>
<p>push esp-4 , 压栈，EIP +4</p>
<p>call EIP 跳转，esp-4 压栈</p>
<p>ret 将栈中的地址弹出到 EIP，esp-4</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211125947066.png" alt="image-20221211125947066"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211130508986.png" alt="image-20221211130508986"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211131806741.png" alt="image-20221211131806741"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211133036307.png" alt="image-20221211133036307"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211133000935.png" alt="image-20221211133000935"></p>
<p>arr [6] 是 ebp+4，放的是函数返回值的地址，修改了返回值在函数返回时会自动执行</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211133428315.png" alt="image-20221211133428315"></p>
<p>全局变量在 pe 头的数据中，局部变量在堆栈中</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211135158527.png" alt="image-20221211135158527"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211135229931.png" alt="image-20221211135229931"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211134515487.png" alt="image-20221211134515487"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221211134557068.png" alt="image-20221211134557068"></p>
<h2 id="进制"><a class="markdownIt-Anchor" href="#进制">#</a> 进制</h2>
<p>进制的本质是查数</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221212151456236.png" alt="image-20221212151456236"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221212151324431.png" alt="image-20221212151324431"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221212151333052.png" alt="image-20221212151333052"></p>
<h2 id="数据宽度"><a class="markdownIt-Anchor" href="#数据宽度">#</a> 数据宽度</h2>
<p>4 位宽度表示</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213152958630.png" alt="image-20221213152958630"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213153742328.png" alt="image-20221213153742328"></p>
<p>8 位宽度表示</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213153933311.png" alt="image-20221213153933311"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213154014302.png" alt="image-20221213154014302"></p>
<p>16 位宽度表示</p>
<p>32 位宽度表示</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213154324319.png" alt="image-20221213154324319"></p>
<p>6、几个重要的计量单位:</p>
<p>BYTE 字节 8BIT</p>
<p>WORD 字 16BIT 2 字节</p>
<p>DWORD 双字 32BIT 4 字节</p>
<p>or</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213154728965.png" alt="image-20221213154728965"></p>
<p>and</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213155024628.png" alt="image-20221213155024628"></p>
<p>xor</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213155128086.png" alt="image-20221213155128086"></p>
<p>not</p>
<p>2+3</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221210132659775.png" alt="image-20221210132659775"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213160855262.png" alt="image-20221213160855262"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213160948087.png" alt="image-20221213160948087"></p>
<h2 id="寄存器"><a class="markdownIt-Anchor" href="#寄存器">#</a> 寄存器</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213162041512.png" alt=" "></p>
<p>mov ebx,0x123456789    //ebx=23456789  忽略高位，1 是高位</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213171205765.png" alt="image-20221213171205765"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213171554801.png" alt="image-20221213171554801"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213174336225.png" alt="image-20221213174336225"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213175435630.png" alt="image-20221213175435630"></p>
<p><img data-src="../AppData/Roaming/Typora/typora-user-images/image-20221213182649856.png" alt="image-20221213182649856"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213183047619.png" alt="image-20221213183047619"></p>
<p><strong>我们可以打补丁或者其他方式拓展内存</strong></p>
<h2 id="内存"><a class="markdownIt-Anchor" href="#内存">#</a> 内存</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213183647234.png" alt="image-20221213183647234"></p>
<p>栈中每四个内存单元一组</p>
<img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221213184806456.png" alt="image-20221213184806456" style="zoom:200%;" />
<p>数据窗口中以小端存储以 db 查看时</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214203828764.png" alt="image-20221214203828764"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214203909142.png" alt="image-20221214203909142"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214204249791.png" alt="image-20221214204249791"></p>
<p>0012FFDC = E4</p>
<p>0012FFDD = 7C</p>
<p>在数据窗口是小端在前</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214205211991.png" alt="image-20221214205211991"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214205617926.png" alt="image-20221214205617926"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214210429166.png" alt="image-20221214210429166"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214210441256.png" alt="image-20221214210441256"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214210742628.png" alt="image-20221214210742628"></p>
<h2 id="堆栈"><a class="markdownIt-Anchor" href="#堆栈">#</a> 堆栈</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214213244308.png" alt="image-20221214213244308"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214213607192.png" alt="image-20221214213607192"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214214015040.png" alt="image-20221214214015040"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221214214825379.png" alt="image-20221214214825379"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">push imm    //esp-4</span><br><span class="line">push al     //不能push8位</span><br><span class="line">push ax     //esp-2</span><br><span class="line">push eax    //esp-4</span><br><span class="line">push dword ptr ds:[12FFDC]   //esp-4</span><br><span class="line">push word ptr ds:[12FFDC]    //esp-2</span><br><span class="line">push byte ptr ds:[12FFDC]    //不能push 8位内存</span><br><span class="line"></span><br><span class="line">pushad   //将所有通用寄存器入栈</span><br><span class="line">popad </span><br></pre></td></tr></table></figure>
<h2 id="jcc"><a class="markdownIt-Anchor" href="#jcc">#</a> JCC</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219205236604.png" alt="image-20221219205236604"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219205328411.png" alt="image-20221219205328411"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219210046713.png" alt="image-20221219210046713"></p>
<p>只计算最低有效字节中的 1 的个数</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219210317802.png" alt="image-20221219210317802"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">看当前数据宽度/2 中间的位是否进位</span><br><span class="line">12345678  看5是否产生进位</span><br><span class="line">16位，8位一样 </span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219210949437.png" alt="image-20221219210949437"></p>
<p>test 和 xor 的区别</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219211306372.png" alt="image-20221219211306372"></p>
<hr>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219212150517.png" alt="image-20221219212150517"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219213621597.png" alt="image-20221219213621597"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219213712037.png" alt="image-20221219213712037"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219213903993.png" alt="image-20221219213903993"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adc al,cl</span><br><span class="line">al = al + cl + 进位标志carry(1)</span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219214113901.png" alt="image-20221219214113901"></p>
<p>Borrow</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219214341294.png" alt="image-20221219214341294"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219214413526.png" alt="image-20221219214413526"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219215219369.png" alt="image-20221219215219369"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movs stos  移动方向由D标志位决定 </span><br><span class="line">D = 0 + </span><br><span class="line">D = 1 -</span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221219215520140.png" alt="image-20221219215520140"></p>
<h2 id="jcc-2"><a class="markdownIt-Anchor" href="#jcc-2">#</a> JCC</h2>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221228171843970.png" alt="image-20221228171843970"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221228184206472.png" alt="image-20221228184206472"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221228184559423.png" alt="image-20221228184559423"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221228184754864.png" alt="image-20221228184754864"></p>
<p>test  可以判断寄存器中值是否为 0</p>
<p><strong>call 执行时首先将 call 的下一条命令入栈，通过当前地址 + 当前指令长度，指令长度通过硬编码确定，此时 esp-4，作为 call ret 之后的下一条执行，EIP 变为 call 的地址</strong></p>
<p><strong>ret 时将栈顶的返回地址给 EIP，esp+4</strong></p>
<p><strong>因此一个函数在被调用时，堆栈栈顶就是他返回后执行的下一条指令</strong></p>
<h2 id="堆栈图"><a class="markdownIt-Anchor" href="#堆栈图">#</a> 堆栈图</h2>
<p>定位到 winMain</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221230210156563.png" alt="image-20221230210156563"></p>
<p>有如下函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">00401085  |.  6A 04         push    0x4</span><br><span class="line">00401087  |.  6A 03         push    0x3</span><br><span class="line">00401089  |.  E8 77FFFFFF   call    00401005</span><br><span class="line">0040108E  |.  83C4 08       add     esp,0x8</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">00401005   $ /E9 16000000   jmp     add</span><br><span class="line">0040100A   $ |E9 51000000   jmp     main</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">00401020 &gt;/&gt; \55            push    ebp</span><br><span class="line">00401021  |.  8BEC          mov     ebp,esp</span><br><span class="line">00401023  |.  83EC 48       sub     esp,0x48</span><br><span class="line">00401026  |.  53            push    ebx</span><br><span class="line">00401027  |.  56            push    esi</span><br><span class="line">00401028  |.  57            push    edi</span><br><span class="line">00401029  |.  8D7D B8       lea     edi,[local.18]</span><br><span class="line">0040102C  |.  B9 12000000   mov     ecx,0x12</span><br><span class="line">00401031  |.  B8 CCCCCCCC   mov     eax,0xCCCCCCCC</span><br><span class="line">00401036  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line">00401038  |.  8B45 08       mov     eax,[arg.1]</span><br><span class="line">0040103B  |.  8945 FC       mov     [local.1],eax</span><br><span class="line">0040103E  |.  8B4D 0C       mov     ecx,[arg.2]</span><br><span class="line">00401041  |.  894D F8       mov     [local.2],ecx</span><br><span class="line">00401044  |.  8B45 FC       mov     eax,[local.1]</span><br><span class="line">00401047  |.  0345 F8       add     eax,[local.2]</span><br><span class="line">0040104A  |.  5F            pop     edi</span><br><span class="line">0040104B  |.  5E            pop     esi</span><br><span class="line">0040104C  |.  5B            pop     ebx</span><br><span class="line">0040104D  |.  8BE5          mov     esp,ebp</span><br><span class="line">0040104F  |.  5D            pop     ebp</span><br><span class="line">00401050  \.  C3            retn</span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221230235920026.png" alt="image-20221230235920026"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221230235929733.png" alt="image-20221230235929733"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20221230235938501.png" alt="image-20221230235938501"></p>
<blockquote>
<p>注意 1:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">0018FE94     00000001</span><br><span class="line">0018FE98     0018FF48</span><br><span class="line">0018FE9C     00000000</span><br><span class="line">0018FEA0     7EFDE000</span><br><span class="line">0018FEA4     CCCCCCCC</span><br><span class="line">0018FEA8     CCCCCCCC</span><br><span class="line">0018FEAC     CCCCCCCC</span><br><span class="line">0018FEB0     CCCCCCCC</span><br><span class="line">0018FEB4     CCCCCCCC</span><br><span class="line">0018FEB8     CCCCCCCC</span><br><span class="line">0018FEBC     CCCCCCCC</span><br><span class="line">0018FEC0     CCCCCCCC</span><br><span class="line">0018FEC4     CCCCCCCC</span><br><span class="line">0018FEC8     CCCCCCCC</span><br><span class="line">0018FECC     CCCCCCCC</span><br><span class="line">0018FED0     CCCCCCCC</span><br><span class="line">0018FED4     CCCCCCCC</span><br><span class="line">0018FED8     CCCCCCCC</span><br><span class="line">0018FEDC     CCCCCCCC</span><br><span class="line">0018FEE0     CCCCCCCC</span><br><span class="line">0018FEE4     00000004</span><br><span class="line">0018FEE8     00000003</span><br><span class="line">0018FEEC     0018FF48</span><br><span class="line">0018FEF0     0040108E  add.0040108E</span><br><span class="line">0018FEF4     00000003</span><br><span class="line">0018FEF8     00000004</span><br><span class="line">0018FEFC     00000000</span><br></pre></td></tr></table></figure>
<p>这是 add esp, 0x8 之后的堆栈，并不是将他清空了，只是改变了 esp，垃圾数据还在那</p>
<p>注意 2：</p>
<p>CCCCCCCC 是 int3 的硬编码</p>
<p>注意 3：</p>
<p>esp+8 是外部传进来的参数</p>
<p>esp-4 是函数内部的局部变量</p>
<p>esp+4 是函数返回的地址</p>
<p>注意 4：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">int add(int a, int b)</span><br><span class="line">&#123;</span><br><span class="line">	int c = a;</span><br><span class="line">	int d = b;</span><br><span class="line">	return c + d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;Hello World!\n&quot;);</span><br><span class="line">	add(3,4);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line">//这是函数代码</span><br></pre></td></tr></table></figure>
<p>注意 5：</p>
<p>add esp,0x8 是 cdecl 的外平栈</p>
<p>ret 8 是 stdcall 的内平栈</p>
<p>注意 6</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lea     edi,dword ptr ss:[ebp-0x48]</span><br><span class="line">mov     ecx,0x12</span><br><span class="line">mov     eax,0xCCCCCCCC</span><br><span class="line">rep     stos dword ptr es:[edi]</span><br></pre></td></tr></table></figure>
<p>的作用是重复 12 次，将 CCCCCCCC 的值不停填充到 ebp-48 的位置，每填充一次 edi+4，edi+4 或 - 4 由 df 标志位决定，df=0 +  df=1 -</p>
</blockquote>
<h2 id="函数"><a class="markdownIt-Anchor" href="#函数">#</a> 函数</h2>
<p>计算机的函数，是一个固定的一个程序段，或称其为一个子程序，它东可以实现固定运算功能的同时还带有一入口和一个出口，所谓的入口，就是函数所带的各个参数，我们可以通过这个入口，把函数的参数值代入子程序，供计算机处理，所谓出口，就是指函数的计算结果，也称为返回值，在计算机求得之后，由此口带回给调用它的程序。</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230101174907969.png" alt="image-20230101174907969"></p>
<p>函数传参包括寄存器传参 (比如 this 指针) 和内存传参</p>
<p>函数返回结果可以通过寄存器返回 (一般为 EAX) 或者内存</p>
<p>Windows 堆栈特点</p>
<p>1. 现进后出</p>
<p>2. 向低地址扩展</p>
<p>windows 中的堆栈，是一块普通的内存，主要用来存储一些临时的数据和参数等可以把 Windows 中的堆栈想象成是一个公用的书箱，函数就像是使用箱子的人函数在执行的时候，会用到这个书箱，把一些数据存到里面，但用完的时候一定要记得把书拿走，否则会乱的，也就是说，你放进去几本书，走的时候也要拿走几本书，这个就是堆栈平衡.</p>
<h2 id="c语言"><a class="markdownIt-Anchor" href="#c语言">#</a> C 语言</h2>
<h3 id="vc60"><a class="markdownIt-Anchor" href="#vc60">#</a> VC6.0</h3>
<p><strong>快捷键</strong></p>
<p>F7 编译</p>
<p>F5 执行</p>
<p>shift + F5 结束</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230103212249828.png" alt="image-20230103212249828"></p>
<p>函数名、参数名、变量名的命名规则：只能包含字母、数字和_且不能以数字开头.</p>
<p><strong>函数返回值</strong></p>
<p>1. 无参数，无返回值的格式形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void fun()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>当函数没有参数时不需要提升和降低堆栈</strong></p>
<p>2. 有参数，无返回值函数格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void fn(int a,double b)</span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>裸函数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> __declspec(naked) func1()</span><br><span class="line">&#123;</span><br><span class="line">	__asm</span><br><span class="line">	&#123;</span><br><span class="line">		ret</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> __declspec(naked) func1(<span class="type">int</span> x, <span class="type">int</span> y)</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">调用裸函数中没有代码，没有ret,不能正常返回，会报错</span><br><span class="line">需要手动加内联汇编中ret返回 </span><br></pre></td></tr></table></figure>
<p>调用约定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">__cdecl			从右至左入栈							调用者清理栈					默认调用约定</span><br><span class="line">__stdcall		从右至左入栈							自身清理堆栈					winapi调用方式</span><br><span class="line">__fastcall		ecx/edx传送前两个，从右至左入栈			自身清理堆栈，如果参数大于两个，小于两个不用清理</span><br></pre></td></tr></table></figure>
<p>函数入口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">main(int 1, char * * 0x005210d8) line 23</span><br><span class="line">mainCRTStartup() line 206 + 25 bytes</span><br><span class="line">KERNEL32! 74d433ca()</span><br><span class="line">NTDLL! 76f59ed2()</span><br><span class="line">NTDLL! 76f59ea5()</span><br></pre></td></tr></table></figure>
<p>更改入口点</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230104194840789.png" alt="image-20230104194840789"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main 函数被调用前要先调用的函数如下:</span><br><span class="line">GetVersion()</span><br><span class="line">_heap_init()</span><br><span class="line">GetCommandLineA()</span><br><span class="line">_crtGetEnvironmentStringsA()</span><br><span class="line">_setargv(</span><br><span class="line">_setenvp()</span><br><span class="line">_cinit()</span><br><span class="line"></span><br><span class="line">以上函数都会在mainCRTStartup中初始化</span><br><span class="line"></span><br><span class="line">mainret = main(__argc,__argv,__environ);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">00401180 &gt;/$  55            push    ebp</span><br><span class="line">00401181  |.  8BEC          mov     ebp,esp</span><br><span class="line">00401183  |.  6A FF         push    -0x1</span><br><span class="line">00401185  |.  68 38214200   push    00422138</span><br><span class="line">0040118A  |.  68 30424000   push    _except_handler3                 ;  SE 处理程序安装</span><br><span class="line">0040118F  |.  64:A1 0000000&gt;mov     eax,dword ptr fs:[0]</span><br><span class="line">00401195  |.  50            push    eax</span><br><span class="line">00401196  |.  64:8925 00000&gt;mov     dword ptr fs:[0],esp</span><br><span class="line">0040119D  |.  83C4 F0       add     esp,-0x10</span><br><span class="line">004011A0  |.  53            push    ebx</span><br><span class="line">004011A1  |.  56            push    esi</span><br><span class="line">004011A2  |.  57            push    edi</span><br><span class="line">004011A3  |.  8965 E8       mov     [local.6],esp</span><br><span class="line">004011A6  |.  FF15 4CA14200 call    dword ptr ds:[&lt;&amp;KERNEL32.GetVers&gt;;  kernel32.GetVersion</span><br><span class="line">004011AC  |.  A3 707C4200   mov     dword ptr ds:[_osver],eax</span><br><span class="line">004011B1  |.  A1 707C4200   mov     eax,dword ptr ds:[_osver]</span><br><span class="line">004011B6  |.  C1E8 08       shr     eax,0x8</span><br><span class="line">004011B9  |.  25 FF000000   and     eax,0xFF</span><br><span class="line">004011BE  |.  A3 7C7C4200   mov     dword ptr ds:[_winminor],eax</span><br><span class="line">004011C3  |.  8B0D 707C4200 mov     ecx,dword ptr ds:[_osver]</span><br><span class="line">004011C9  |.  81E1 FF000000 and     ecx,0xFF</span><br><span class="line">004011CF  |.  890D 787C4200 mov     dword ptr ds:[_winmajor],ecx</span><br><span class="line">004011D5  |.  8B15 787C4200 mov     edx,dword ptr ds:[_winmajor]</span><br><span class="line">004011DB  |.  C1E2 08       shl     edx,0x8</span><br><span class="line">004011DE  |.  0315 7C7C4200 add     edx,dword ptr ds:[_winminor]</span><br><span class="line">004011E4  |.  8915 747C4200 mov     dword ptr ds:[_winver],edx</span><br><span class="line">004011EA  |.  A1 707C4200   mov     eax,dword ptr ds:[_osver]</span><br><span class="line">004011EF  |.  C1E8 10       shr     eax,0x10</span><br><span class="line">004011F2  |.  25 FFFF0000   and     eax,0xFFFF</span><br><span class="line">004011F7  |.  A3 707C4200   mov     dword ptr ds:[_osver],eax</span><br><span class="line">004011FC  |.  6A 00         push    0x0</span><br><span class="line">004011FE  |.  E8 BD2D0000   call    _heap_init</span><br><span class="line">00401203  |.  83C4 04       add     esp,0x4</span><br><span class="line">00401206  |.  85C0          test    eax,eax</span><br><span class="line">00401208  |.  75 0A         jnz     short 00401214</span><br><span class="line">0040120A  |.  6A 1C         push    0x1C</span><br><span class="line">0040120C  |.  E8 CF000000   call    fast_error_exit</span><br><span class="line">00401211  |.  83C4 04       add     esp,0x4</span><br><span class="line">00401214  |&gt;  C745 FC 00000&gt;mov     [local.1],0x0</span><br><span class="line">0040121B  |.  E8 A0270000   call    _ioinit</span><br><span class="line">00401220  |.  FF15 48A14200 call    dword ptr ds:[&lt;&amp;KERNEL32.GetComm&gt;; [GetCommandLineA</span><br><span class="line">00401226  |.  A3 04964200   mov     dword ptr ds:[_acmdln],eax</span><br><span class="line">0040122B  |.  E8 70250000   call    __crtGetEnvironmentStringsA</span><br><span class="line">00401230  |.  A3 487C4200   mov     dword ptr ds:[_aenvptr],eax</span><br><span class="line">00401235  |.  E8 56200000   call    _setargv</span><br><span class="line">0040123A  |.  E8 011F0000   call    _setenvp</span><br><span class="line">0040123F  |.  E8 1C1B0000   call    _cinit</span><br><span class="line">00401244  |.  8B0D 8C7C4200 mov     ecx,dword ptr ds:[_environ]</span><br><span class="line">0040124A  |.  890D 907C4200 mov     dword ptr ds:[__initenv],ecx</span><br><span class="line">00401250  |.  8B15 8C7C4200 mov     edx,dword ptr ds:[_environ]</span><br><span class="line">00401256  |.  52            push    edx</span><br><span class="line">00401257  |.  A1 847C4200   mov     eax,dword ptr ds:[__argv]</span><br><span class="line">0040125C  |.  50            push    eax</span><br><span class="line">0040125D  |.  8B0D 807C4200 mov     ecx,dword ptr ds:[__argc]</span><br><span class="line">00401263  |.  51            push    ecx</span><br><span class="line">00401264  |.  E8 A1FDFFFF   call    0040100A</span><br><span class="line">00401269  |.  83C4 0C       add     esp,0xC</span><br><span class="line">0040126C  |.  8945 E4       mov     [local.7],eax</span><br><span class="line">0040126F  |.  8B55 E4       mov     edx,[local.7]</span><br><span class="line">00401272  |.  52            push    edx                              ; /status</span><br><span class="line">00401273  |.  E8 281B0000   call    exit                             ; \exit</span><br><span class="line">00401278  |.  8B45 EC       mov     eax,[local.5]</span><br><span class="line">0040127B  |.  8B08          mov     ecx,dword ptr ds:[eax]</span><br><span class="line">0040127D  |.  8B11          mov     edx,dword ptr ds:[ecx]</span><br><span class="line">0040127F  |.  8955 E0       mov     [local.8],edx</span><br><span class="line">00401282  |.  8B45 EC       mov     eax,[local.5]</span><br><span class="line">00401285  |.  50            push    eax</span><br><span class="line">00401286  |.  8B4D E0       mov     ecx,[local.8]</span><br><span class="line">00401289  |.  51            push    ecx</span><br><span class="line">0040128A  |.  E8 A11C0000   call    _XcptFilter</span><br><span class="line">0040128F  |.  83C4 08       add     esp,0x8</span><br><span class="line">00401292  \.  C3            retn</span><br></pre></td></tr></table></figure>
<h3 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型">#</a> 数据类型</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">基本类型：   	  整数类型</span><br><span class="line">			     浮点类型</span><br><span class="line">整数类型： <span class="type">char</span> <span class="type">short</span> <span class="title function_">int</span><span class="params">(<span class="number">32</span>)</span> <span class="title function_">long</span><span class="params">(<span class="number">32</span>)</span> </span><br><span class="line"></span><br><span class="line"><span class="type">char</span> i = <span class="number">0x12345678</span>;</span><br><span class="line">mov byte ptr [ebp<span class="number">-4</span>],<span class="number">78</span>h</span><br><span class="line"></span><br><span class="line"><span class="type">short</span> k = <span class="number">0x12345678</span>      k = <span class="number">5678</span></span><br><span class="line"></span><br><span class="line">整数类型 <span class="type">unsigned</span> <span class="type">signed</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span>  a = <span class="number">0xFF</span>;    <span class="comment">//不写char默认int</span></span><br><span class="line"><span class="type">char</span> b = <span class="number">0xFF</span>;</span><br><span class="line">在内存中都是FF，但使用时有符号<span class="number">-1</span>，无符号<span class="number">255</span></span><br><span class="line">类型转化，比较大小</span><br><span class="line">    </span><br><span class="line">编译器对于有符号和无符号的jcc编译结果不一样</span><br><span class="line">jz je</span><br><span class="line">    </span><br><span class="line">浮点类型 <span class="type">float</span> <span class="type">double</span></span><br><span class="line"><span class="type">float</span> 存储方式 </span><br><span class="line">符号位      指数部分			尾数部分</span><br><span class="line"><span class="number">31</span><span class="number">-30</span>      <span class="number">30</span><span class="number">-22</span>            <span class="number">22</span><span class="number">-0</span></span><br><span class="line"><span class="type">double</span> 存储方式 </span><br><span class="line">符号位      指数部分			尾数部分</span><br><span class="line"><span class="number">63</span><span class="number">-62</span>      <span class="number">62</span><span class="number">-51</span>            <span class="number">51</span><span class="number">-0</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>将一个 float 型转化为内存存储格式的步骤为:</p>
<p>1、先将这个实数的绝对值化为二进制格式<br>
 2、将这个二进制格式实数的小数点左移或右移 n 位，直到小数点移动到第一个有效数字的右边。</p>
<p>3、从小数点右边第一位开始数出二十三位数字放入第 22 到第 0 位。</p>
<p>4、如果实数是正的，则在第 31 位放入 “0”，否则放入 “1”。</p>
<p>5、如果 n 是左移得到的，说明指数是正的，第 30 位放入 “1”。如果 n 是右移得到的或 n=0，则第 30 位放入 0</p>
<p>6、如果 n 是左移得到的，则将 n 减去 1 后化为二进制，并在左边加 “0” 补足七位，放入第 29 到第 23 位。</p>
<p>如果 n 是右移得到的或 n=0，则将 n 化为二进制后在左边加 “0” 补足七位，再各位求反，再放入第 29 到第 23 位</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">8.25</span><br><span class="line">1.转为二进制数,整数部分除二取余,倒序排列,整数部分乘二取整,正序排列</span><br><span class="line">	1000.01</span><br><span class="line">2.科学计数法,左移+右移-</span><br><span class="line">	1.00001*(2^3)</span><br><span class="line">3.存放尾数,加起来一共23位，不够用0补，补在最后</span><br><span class="line">	00001000000000000000000</span><br><span class="line">4.符号位正0负1</span><br><span class="line">	0</span><br><span class="line">5.指数部分,第一位为位移方向，左移1，右移0.剩下七位是指数二进制-1的值    (或者使用127+x转为二进制填充 )</span><br><span class="line">	10000010</span><br><span class="line">6.拼接</span><br><span class="line">	01000001000001000000000000000000</span><br><span class="line">	41040000</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0.25</span><br><span class="line"></span><br><span class="line">0.01   -&gt; 1.0</span><br><span class="line">1 * (2^(-2))  右移</span><br><span class="line">FD = -2-1 = -3</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line">0 1111101</span><br><span class="line">00000000000000000000000</span><br><span class="line"></span><br><span class="line">00111110100000000000000000000000</span><br><span class="line"></span><br><span class="line">3E800000</span><br></pre></td></tr></table></figure>
<p>尾数部分长度决定精确度，比如 8.4 的小数部分无限循环</p>
<p>比如 float 精确到 24 位 (尾数 + 科学计数法最前面的 0 或 1)，可以精确到小数点后 6 位</p>
<h3 id="编码"><a class="markdownIt-Anchor" href="#编码">#</a> 编码</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">通过两个ASCII表示一个汉字，即为GB2312</span><br><span class="line"></span><br><span class="line">一个小于127的字符的意义与原来相同，但两个大于127的字符连在一起时，就表示一个汉字，前面的一个字节(他称之为高字节）从0xA1用至0xF7，后面一个字(低字节)从0xA1到0xFE，这样我们就可以组合出大约7000多个简体汉字了。</span><br><span class="line"></span><br><span class="line">一个char占一个字节，放不下gb2312</span><br><span class="line">gb2312每个字节最高位都是1 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>if</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if-else  /  if - if else else </span><br><span class="line">只会执行其中一种分支</span><br></pre></td></tr></table></figure>
<h3 id="程序内存"><a class="markdownIt-Anchor" href="#程序内存">#</a> 程序内存</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">代码区  可读可执行</span><br><span class="line"></span><br><span class="line">堆栈   参数，局部变量，临时数据</span><br><span class="line"></span><br><span class="line">堆    动态申请，大小可变，可读可写</span><br><span class="line"></span><br><span class="line">全局变量   可读可写,程序运行时分配</span><br><span class="line"></span><br><span class="line">常量区    只读</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>全局变量的特点:<br>
1、全局变量在程序编译完成后地址就已经确定下来了，只要程序启动，全局变量就已经存是否有值取决于声明时是否给定了初始值，如果没有，默认为 0</p>
<p>2、全局变量的值可以被所有函数所修改，里面存储的是最后一次修改的值.</p>
<p>3、全局变量所占内存会一直存在，知道整个进程结束.</p>
<p>4、全局变量的反汇编识别:</p>
<p>MOV 寄存器，byte/word/dword ptr ds: [0x12345678]</p>
<p>通过寄存器的宽度，或者 byte/word/dword 来判断全局变量的宽度</p>
<p>全局变量就是基址</p>
<p>局部变量的特点</p>
<p>1、局部变量在程序编译完成后并没有分配固定的地址.</p>
<p>2、在所属的方法没有被调用时，局部变量并不会分配内存地址，只有调用时才在堆栈中分配内存.</p>
<p>3、当局部变量所属的方法执行先毕后，局部变量所占用的内存将变成垃圾</p>
<p>4、局部变量只能在方法内部使用，函数 A 无法使用函数 B 的局部变量.</p>
<p>5、局部变量的反汇编识别:</p>
<p>判断参数个数</p>
<p>观察调用处的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">push 3</span><br><span class="line">call </span><br></pre></td></tr></table></figure>
<p>找到堆栈平衡的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call</span><br><span class="line">add esp,0C</span><br><span class="line"></span><br><span class="line">或者函数内部</span><br><span class="line">ret 0xC</span><br></pre></td></tr></table></figure>
<p>1、不考虑 ebp、 esp</p>
<p>2、只找给别人赋值的寄存器 eax/ecx/edx/ebx/esi/edi</p>
<p>3、找到以后追查其来源，如果，该寄存器中的值不是在函数内存赋值的，那一定是传进来的参数.</p>
<p>公式一：寄存器 + ret4 = 参数个数</p>
<p>公式二：寄存器＋[ebp+8] +[ebp+0x] = 参数个数</p>
<h3 id="if语句"><a class="markdownIt-Anchor" href="#if语句">#</a> if 语句</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int g_n = 10;</span><br><span class="line">void func(int x, int y)</span><br><span class="line">&#123;</span><br><span class="line">	if (x&gt;y)</span><br><span class="line">	&#123;</span><br><span class="line">		g_n = x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mov eax,dword ptr [ebp+8]</span><br><span class="line">cmp eax,dword ptr [ebp+0x0C]</span><br><span class="line">jle func+29h(401049)</span><br><span class="line">mov ecx,dword ptr [ebp+8]</span><br><span class="line">mov dword ptr [424a30],ecx</span><br><span class="line">pop edi   401049</span><br></pre></td></tr></table></figure>
<p>在反汇编中 jcc 的代码和 if 中的判断条件是相反的</p>
<p>还原反汇编</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230110133105437.png" alt="image-20230110133105437"></p>
<p>函数内部功能分析:</p>
<p>1、分析参数:[ebp+8] : x   [ebp+0Ch] :Y</p>
<p>2、分析局部变量</p>
<p>3、分析全局变量<br>
 mov dword ptr 004225c4,ecx</p>
<p>4、功能分析<br>
 eax, dword ptr [ebp+8]<br>
cmp eax, dword ptr [ebp+0Ch]</p>
<p>将参数 x 存到到 EAX 中，然后比较 EAX。与参数 Y 的大小如果 x&lt;=Y 那么跳转到 00401059 的位置</p>
<p>否则，将 X 的值存储到全局变量中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int a</span><br><span class="line">int func(int x, int y)</span><br><span class="line">&#123;</span><br><span class="line">	int var1 = a;</span><br><span class="line">	if(x&lt;=y)</span><br><span class="line">	&#123;</span><br><span class="line">		y = var1 + y;</span><br><span class="line">        a = y;</span><br><span class="line">	&#125;</span><br><span class="line">	ret a</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>if 会有影响寄存器的语句，然后 JCC</p>
<p>if-else 中会有向下跳的 jmp，通过 jmp 跳过 else 之后的代码</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230110141055410.png" alt="image-20230110141055410"></p>
<p>1、当每个条件跳转指令要跳转的地址前面都有 jmp 指令</p>
<p>2、这些 jmp 指令跳转的地址都是一样的</p>
<p>3、如果某个分支没有条件判断，则为 else 部分中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdafx.h&quot;</span><br><span class="line"></span><br><span class="line">void HelloWorld()</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;helloworld&quot;);</span><br><span class="line">	getchar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	int arr[5] = &#123;1,2,3,4,5&#125;;</span><br><span class="line">	arr[6] = (int)HelloWorld;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">004010C0 &gt;/&gt; \55            push    ebp</span><br><span class="line">004010C1  |.  8BEC          mov     ebp,esp</span><br><span class="line">004010C3  |.  83EC 54       sub     esp,0x54</span><br><span class="line">004010C6  |.  53            push    ebx</span><br><span class="line">004010C7  |.  56            push    esi</span><br><span class="line">004010C8  |.  57            push    edi</span><br><span class="line">004010C9  |.  8D7D AC       lea     edi,[local.21]</span><br><span class="line">004010CC  |.  B9 15000000   mov     ecx,0x15</span><br><span class="line">004010D1  |.  B8 CCCCCCCC   mov     eax,0xCCCCCCCC</span><br><span class="line">004010D6  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line">004010D8  |.  C745 EC 01000&gt;mov     dword ptr ss:[ebp-0x14],0x1</span><br><span class="line">004010DF  |.  C745 F0 02000&gt;mov     [local.4],0x2</span><br><span class="line">004010E6  |.  C745 F4 03000&gt;mov     [local.3],0x3</span><br><span class="line">004010ED  |.  C745 F8 04000&gt;mov     [local.2],0x4</span><br><span class="line">004010F4  |.  C745 FC 05000&gt;mov     dword ptr ss:[ebp-0x4],0x5</span><br><span class="line">004010FB  |.  C745 04 05104&gt;mov     dword ptr ss:[ebp+0x4],00401005</span><br><span class="line">00401102  |.  33C0          xor     eax,eax</span><br><span class="line">00401104  |.  5F            pop     edi</span><br><span class="line">00401105  |.  5E            pop     esi</span><br><span class="line">00401106  |.  5B            pop     ebx</span><br><span class="line">00401107  |.  8BE5          mov     esp,ebp</span><br><span class="line">00401109  |.  5D            pop     ebp</span><br><span class="line">0040110A  \.  C3            retn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">0018FF28   CCCCCCCC</span><br><span class="line">0018FF2C   CCCCCCCC</span><br><span class="line">0018FF30   CCCCCCCC</span><br><span class="line">0018FF34   CCCCCCCC</span><br><span class="line">0018FF38   CCCCCCCC</span><br><span class="line">0018FF3C   CCCCCCCC</span><br><span class="line">0018FF40   CCCCCCCC</span><br><span class="line">0018FF44   CCCCCCCC</span><br><span class="line">0018FF48  /0018FF88  ebp</span><br><span class="line">0018FF4C  |004015F9  返回到 88888.&lt;ModuleEntryPoint&gt;+0E9 来自 88888.0040100A</span><br><span class="line"></span><br><span class="line">0018FF28   CCCCCCCC</span><br><span class="line">0018FF2C   CCCCCCCC</span><br><span class="line">0018FF30   CCCCCCCC</span><br><span class="line">0018FF34   00000001</span><br><span class="line">0018FF38   00000002</span><br><span class="line">0018FF3C   00000003</span><br><span class="line">0018FF40   00000004</span><br><span class="line">0018FF44   00000005</span><br><span class="line">0018FF48   0018FF88  ebp</span><br><span class="line">0018FF4C   00401005  88888.00401005</span><br><span class="line"></span><br><span class="line">00401005   . /E9 16000000   jmp     HelloWorld</span><br><span class="line">0040100A   $ |E9 B1000000   jmp     main</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;stdafx.h&quot;</span><br><span class="line"></span><br><span class="line">void Func()</span><br><span class="line">&#123;</span><br><span class="line">	int i;</span><br><span class="line">	int arr[5] = &#123;0&#125;;</span><br><span class="line"></span><br><span class="line">	for(i=0;i&lt;=5;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		arr[i]=0;</span><br><span class="line">		printf(&quot;hello world&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	Func();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">004010C0 &gt;/&gt; \55            push    ebp</span><br><span class="line">004010C1  |.  8BEC          mov     ebp,esp</span><br><span class="line">004010C3  |.  83EC 40       sub     esp,0x40</span><br><span class="line">004010C6  |.  53            push    ebx</span><br><span class="line">004010C7  |.  56            push    esi</span><br><span class="line">004010C8  |.  57            push    edi</span><br><span class="line">004010C9  |.  8D7D C0       lea     edi,[local.16]</span><br><span class="line">004010CC  |.  B9 10000000   mov     ecx,0x10</span><br><span class="line">004010D1  |.  B8 CCCCCCCC   mov     eax,0xCCCCCCCC</span><br><span class="line">004010D6  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line">004010D8  |.  E8 32FFFFFF   call    0040100F</span><br><span class="line">004010DD  |.  33C0          xor     eax,eax</span><br><span class="line">004010DF  |.  5F            pop     edi</span><br><span class="line">004010E0  |.  5E            pop     esi</span><br><span class="line">004010E1  |.  5B            pop     ebx</span><br><span class="line">004010E2  |.  83C4 40       add     esp,0x40</span><br><span class="line">004010E5  |.  3BEC          cmp     ebp,esp</span><br><span class="line">004010E7  |.  E8 E4030000   call    _chkesp</span><br><span class="line">004010EC  |.  8BE5          mov     esp,ebp</span><br><span class="line">004010EE  |.  5D            pop     ebp</span><br><span class="line">004010EF  \.  C3            retn</span><br><span class="line"></span><br><span class="line">00401005   . /E9 16000000   jmp     Func</span><br><span class="line">0040100A   $ |E9 B1000000   jmp     main</span><br><span class="line">0040100F  /$ |E9 0C000000   jmp     Func</span><br><span class="line"></span><br><span class="line">00401020 &gt;|&gt; \55            push    ebp</span><br><span class="line">00401021  |.  8BEC          mov     ebp,esp</span><br><span class="line">00401023  |.  83EC 58       sub     esp,0x58</span><br><span class="line">00401026  |.  53            push    ebx</span><br><span class="line">00401027  |.  56            push    esi</span><br><span class="line">00401028  |.  57            push    edi</span><br><span class="line">00401029  |.  8D7D A8       lea     edi,[local.22]</span><br><span class="line">0040102C  |.  B9 16000000   mov     ecx,0x16</span><br><span class="line">00401031  |.  B8 CCCCCCCC   mov     eax,0xCCCCCCCC</span><br><span class="line">00401036  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line">00401038  |.  C745 E8 00000&gt;mov     [local.6],0x0</span><br><span class="line">0040103F  |.  33C0          xor     eax,eax</span><br><span class="line">00401041  |.  8945 EC       mov     [local.5],eax</span><br><span class="line">00401044  |.  8945 F0       mov     [local.4],eax</span><br><span class="line">00401047  |.  8945 F4       mov     [local.3],eax</span><br><span class="line">0040104A  |.  8945 F8       mov     [local.2],eax</span><br><span class="line">0040104D  |.  C745 FC 00000&gt;mov     [local.1],0x0</span><br><span class="line">00401054  |.  EB 09         jmp     short 0040105F</span><br><span class="line">00401056  |&gt;  8B4D FC       /mov     ecx,[local.1]</span><br><span class="line">00401059  |.  83C1 01       |add     ecx,0x1</span><br><span class="line">0040105C  |.  894D FC       |mov     [local.1],ecx</span><br><span class="line">0040105F  |&gt;  837D FC 05     cmp     [local.1],0x5</span><br><span class="line">00401063  |.  7F 1A         |jg      short 0040107F</span><br><span class="line">00401065  |.  8B55 FC       |mov     edx,[local.1]</span><br><span class="line">00401068  |.  C74495 E8 000&gt;|mov     dword ptr ss:[ebp+edx*4-0x18],0&gt;</span><br><span class="line">00401070  |.  68 1C304200   |push    0042301C                        ; /format = &quot;hello world&quot;</span><br><span class="line">00401075  |.  E8 D6030000   |call    printf                          ; \printf</span><br><span class="line">0040107A  |.  83C4 04       |add     esp,0x4</span><br><span class="line">0040107D  |.^ EB D7         \jmp     short 00401056</span><br><span class="line">0040107F  |&gt;  5F            pop     edi</span><br><span class="line">00401080  |.  5E            pop     esi</span><br><span class="line">00401081  |.  5B            pop     ebx</span><br><span class="line">00401082  |.  83C4 58       add     esp,0x58</span><br><span class="line">00401085  |.  3BEC          cmp     ebp,esp</span><br><span class="line">00401087  |.  E8 44040000   call    _chkesp</span><br><span class="line">0040108C  |.  8BE5          mov     esp,ebp</span><br><span class="line">0040108E  |.  5D            pop     ebp</span><br><span class="line">0040108F  \.  C3            retn</span><br><span class="line"></span><br><span class="line">mov     dword ptr ss:[ebp+edx*4-0x18],0 在最后一次循环将ebp-4 = i变为了0，循环条件永远满足</span><br></pre></td></tr></table></figure>
<p>总结:</p>
<p>声明变量就是告诉计算机，我要用一块内存，你给我留着，宽度和存储格式有数据类型决定.</p>
<p>计算机什么时候把这块内存给你，取决于变量的作用范围，如果是全局变量，在程序编译完就已经分配了空间，如果是局所在的程序被调用的时候，才会分配空间.</p>
<p>全局变量如果不赋初始值，默认是 0，但局部变量在使用前一定要赋初值.</p>
<p>类型转换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">movsx   ;先符号扩展再传送</span><br><span class="line">mov al,0x0FF     </span><br><span class="line">movsx cx,al      11111111 11111111 </span><br><span class="line">movsx al,80</span><br><span class="line">movsx cx,al</span><br><span class="line"></span><br><span class="line">movzx</span><br><span class="line">mov al,0x0ff</span><br><span class="line">movzx cx,al</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int -&gt; short 转换时高位丢失，即从低位开始截取</span><br><span class="line">int a = 0x12345678;</span><br><span class="line">short b = a;     b = 5678</span><br></pre></td></tr></table></figure>
<p>表达式</p>
<p>特点一:</p>
<p>表达式无论多么复杂，都只有一个结果</p>
<p>特点二:</p>
<p>只有表达式，可以编译通过，但并不生成代码，需要与赋值或者其他流程控制语句一起组合的时候才有意义</p>
<p>特点三:</p>
<p>当表达式中存在不同宽度的变量时，结果将转换为宽度最大的那个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char a = 10;</span><br><span class="line">int b = 20;</span><br><span class="line">printf(&quot;%d&quot;,a+b);   ;a+b为int类型</span><br></pre></td></tr></table></figure>
<p>特点四:</p>
<p>当表达式中同时存在有符号和无符号数的时候，表达式的结构将转换为无符号数.</p>
<p>输出无符号或有符号根据输出的格式 % d 或 % u 决定</p>
<p>int x = a == b;    ;sete  setne</p>
<p>sete cmp 相等时 set 寄存器为 1</p>
<p>if(a) == if(a != 0)</p>
<p>if(!a) == if(a == 0)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">if (x&gt;1 &amp;&amp; x&gt;2 &amp;&amp; x&gt;3)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;sb&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if (x&gt;1 || x&gt;2 || x&gt;3)</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;sb&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">00401020 &gt;/&gt; \55            push    ebp</span><br><span class="line">00401021  |.  8BEC          mov     ebp,esp</span><br><span class="line">00401023  |.  83EC 44       sub     esp,0x44</span><br><span class="line">00401026  |.  53            push    ebx</span><br><span class="line">00401027  |.  56            push    esi</span><br><span class="line">00401028  |.  57            push    edi</span><br><span class="line">00401029  |.  8D7D BC       lea     edi,[local.17]</span><br><span class="line">0040102C  |.  B9 11000000   mov     ecx,0x11</span><br><span class="line">00401031  |.  B8 CCCCCCCC   mov     eax,0xCCCCCCCC</span><br><span class="line">00401036  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line">00401038  |.  C745 FC 05000&gt;mov     [local.1],0x5</span><br><span class="line">0040103F  |.  837D FC 01    cmp     [local.1],0x1</span><br><span class="line">00401043  |.  7E 19         jle     short 0040105E</span><br><span class="line">00401045  |.  837D FC 02    cmp     [local.1],0x2</span><br><span class="line">00401049  |.  7E 13         jle     short 0040105E</span><br><span class="line">0040104B  |.  837D FC 03    cmp     [local.1],0x3</span><br><span class="line">0040104F  |.  7E 0D         jle     short 0040105E</span><br><span class="line">00401051  |.  68 1C304200   push    0042301C                         ; /format = &quot;sb&quot;</span><br><span class="line">00401056  |.  E8 F5030000   call    printf                           ; \printf</span><br><span class="line">0040105B  |.  83C4 04       add     esp,0x4</span><br><span class="line">0040105E  |&gt;  837D FC 01    cmp     [local.1],0x1</span><br><span class="line">00401062  |.  7F 0C         jg      short 00401070</span><br><span class="line">00401064  |.  837D FC 02    cmp     [local.1],0x2</span><br><span class="line">00401068  |.  7F 06         jg      short 00401070</span><br><span class="line">0040106A  |.  837D FC 03    cmp     [local.1],0x3</span><br><span class="line">0040106E  |.  7E 0D         jle     short 0040107D</span><br><span class="line">00401070  |&gt;  68 1C304200   push    0042301C                         ; /format = &quot;sb&quot;</span><br><span class="line">00401075  |.  E8 D6030000   call    printf                           ; \printf</span><br><span class="line">0040107A  |.  83C4 04       add     esp,0x4</span><br><span class="line">0040107D  |&gt;  33C0          xor     eax,eax</span><br><span class="line">0040107F  |.  5F            pop     edi</span><br><span class="line">00401080  |.  5E            pop     esi</span><br><span class="line">00401081  |.  5B            pop     ebx</span><br><span class="line">00401082  |.  83C4 44       add     esp,0x44</span><br><span class="line">00401085  |.  3BEC          cmp     ebp,esp</span><br><span class="line">00401087  |.  E8 44040000   call    _chkesp</span><br><span class="line">0040108C  |.  8BE5          mov     esp,ebp</span><br><span class="line">0040108E  |.  5D            pop     ebp</span><br><span class="line">0040108F  \.  C3            retn</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>C 语言没有 bool，C++ 才有</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (x = 0)   //不执行</span><br><span class="line">if (x = 2)   //执行</span><br><span class="line">int a = 3;</span><br><span class="line">if (a == 3)  //执行</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、将两个变量的值交换.</span><br><span class="line">2、将一个数组中的数倒序输出.</span><br><span class="line">3、找出数组里面最大的值，并返回</span><br><span class="line">4、将数组所有的元素相加，将结果返回</span><br><span class="line">5、将两个等长数组相同位置的值相加，存储到另外一个等长的数组中</span><br><span class="line">6、写一个函数int prime(int x)，如果x是素数返回值为1，否则返回0。</span><br><span class="line">7、俩俩比较数组的值，将最大的一个存储到数组的最后一个位置</span><br><span class="line">8、编写程序实现一个冒泡排序的算法.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="循环语句"><a class="markdownIt-Anchor" href="#循环语句">#</a> 循环语句</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">do...while   性能最高的循环</span><br><span class="line">while </span><br><span class="line">for</span><br><span class="line"></span><br><span class="line">int length = 10</span><br><span class="line">int m = 0</span><br><span class="line">int arr[10] = &#123;   &#125;</span><br><span class="line">while (m &lt; length - 1)</span><br><span class="line">&#123;</span><br><span class="line">	for (int i = 1; i &lt; length-1-m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		swap(arr[i],arr[i+1]);</span><br><span class="line">	&#125;</span><br><span class="line">	m++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">如果返回值只有8位，使用al返回</span><br><span class="line">ax</span><br><span class="line">eax</span><br><span class="line"></span><br><span class="line">long long 在vc6中对应的是__int64</span><br><span class="line"></span><br><span class="line">__int64 Function()</span><br><span class="line">&#123;</span><br><span class="line">	__int64 x = 0x1234567890;</span><br><span class="line">	return x;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">00401020 &gt;/&gt; \55                    push    ebp</span><br><span class="line">00401021  |.  8BEC                  mov     ebp,esp</span><br><span class="line">00401023  |.  83EC 48               sub     esp,0x48</span><br><span class="line">00401026  |.  53                    push    ebx</span><br><span class="line">00401027  |.  56                    push    esi</span><br><span class="line">00401028  |.  57                    push    edi</span><br><span class="line">00401029  |.  8D7D B8               lea     edi,[local.18]</span><br><span class="line">0040102C  |.  B9 12000000           mov     ecx,0x12</span><br><span class="line">00401031  |.  B8 CCCCCCCC           mov     eax,0xCCCCCCCC</span><br><span class="line">00401036  |.  F3:AB                 rep     stos dword ptr es:[edi]</span><br><span class="line">00401038  |.  C745 F8 90785634      mov     [local.2],0x34567890</span><br><span class="line">0040103F  |.  C745 FC 12000000      mov     [local.1],0x12</span><br><span class="line">00401046  |.  8B45 F8               mov     eax,[local.2]</span><br><span class="line">00401049  |.  8B55 FC               mov     edx,[local.1]</span><br><span class="line">0040104C  |.  5F                    pop     edi</span><br><span class="line">0040104D  |.  5E                    pop     esi</span><br><span class="line">0040104E  |.  5B                    pop     ebx</span><br><span class="line">0040104F  |.  8BE5                  mov     esp,ebp</span><br><span class="line">00401051  |.  5D                    pop     ebp</span><br><span class="line">00401052  \.  C3                    retn</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参数传递</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">void func(char a,char b,char c)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	char a = 1,b=2,c=3;</span><br><span class="line">	func(a,b,c);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">0040D758  |.  C645 FC 01    mov     byte ptr ss:[ebp-0x4],0x1</span><br><span class="line">0040D75C  |.  C645 F8 02    mov     byte ptr ss:[ebp-0x8],0x2</span><br><span class="line">0040D760  |.  C645 F4 03    mov     byte ptr ss:[ebp-0xC],0x3</span><br><span class="line">0040D764  |.  8A45 F4       mov     al,byte ptr ss:[ebp-0xC]</span><br><span class="line">0040D767  |.  50            push    eax</span><br><span class="line">0040D768  |.  8A4D F8       mov     cl,byte ptr ss:[ebp-0x8]</span><br><span class="line">0040D76B  |.  51            push    ecx</span><br><span class="line">0040D76C  |.  8A55 FC       mov     dl,byte ptr ss:[ebp-0x4]</span><br><span class="line">0040D76F  |.  52            push    edx</span><br><span class="line">0040D770  |.  E8 9A38FFFF   call    0040100F</span><br><span class="line">0040D775  |.  83C4 0C       add     esp,0xC</span><br><span class="line"></span><br><span class="line">虽然定义的是char，但在压栈的时候还是会按照四字节的压，所以没法节约空间</span><br><span class="line"></span><br><span class="line">本机尺寸：本机32位，那么对32位的数据支持最好</span><br><span class="line"></span><br><span class="line">编译器遵守这个规则</span><br><span class="line"></span><br><span class="line">传输数据按照本机尺寸传，用还是按照原来大小用</span><br><span class="line"></span><br><span class="line">传参的时候如果是&lt;int的整数，一律使用int类型 </span><br><span class="line"></span><br><span class="line">参数传递的本质:将上层函数的变量，或者表达式的值“复制一份”，传递给下层函数.  可以理解为[ebp-4] 和 [ebp+8]的区别</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>局部变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">空函数会分配40h的缓冲区,如果使用局部变量会在40h的基础上增加，  只适用于vc6-debug</span><br><span class="line"></span><br><span class="line">void func()</span><br><span class="line">&#123;</span><br><span class="line">	char a = 1;</span><br><span class="line">	char b = 2;</span><br><span class="line">&#125;</span><br><span class="line">此时缓冲区分配了48，因为本机尺寸</span><br><span class="line"></span><br><span class="line">1、小于32位的局部变量，空间在分配时，按32位分配.</span><br><span class="line">2、使用时按实际的宽度使用.</span><br><span class="line">3、不要定义char/short类型的局部变量.</span><br><span class="line">4、参数与局部变量没有本质区别，都是局部变量，都在栈中</span><br><span class="line">5、完全可以把参数当初局部变量使用</span><br><span class="line"></span><br><span class="line">参数在执行前分配，局部变量在执行时分配，本质一样</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> a[<span class="number">3</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="number">0040</span>D740 &gt;/&gt; \<span class="number">55</span>            push    ebp</span><br><span class="line"><span class="number">0040</span>D741  |.  <span class="number">8B</span>EC          mov     ebp,esp</span><br><span class="line"><span class="number">0040</span>D743  |.  <span class="number">83</span>EC <span class="number">44</span>       sub     esp,<span class="number">0x44</span></span><br><span class="line"><span class="number">0040</span>D746  |.  <span class="number">53</span>            push    ebx</span><br><span class="line"><span class="number">0040</span>D747  |.  <span class="number">56</span>            push    esi</span><br><span class="line"><span class="number">0040</span>D748  |.  <span class="number">57</span>            push    edi</span><br><span class="line"><span class="number">0040</span>D749  |.  <span class="number">8</span>D7D BC       lea     edi,[local<span class="number">.17</span>]</span><br><span class="line"><span class="number">0040</span>D74C  |.  B9 <span class="number">11000000</span>   mov     ecx,<span class="number">0x11</span></span><br><span class="line"><span class="number">0040</span>D751  |.  B8 CCCCCCCC   mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">0040</span>D756  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">0040</span>D758  |.  C645 FC <span class="number">01</span>    mov     byte ptr ss:[ebp<span class="number">-0x4</span>],<span class="number">0x1</span></span><br><span class="line"><span class="number">0040</span>D75C  |.  C645 FD <span class="number">02</span>    mov     byte ptr ss:[ebp<span class="number">-0x3</span>],<span class="number">0x2</span></span><br><span class="line"><span class="number">0040</span>D760  |.  C645 FE <span class="number">03</span>    mov     byte ptr ss:[ebp<span class="number">-0x2</span>],<span class="number">0x3</span></span><br><span class="line"><span class="number">0040</span>D764  |.  <span class="number">5F</span>            pop     edi</span><br><span class="line"><span class="number">0040</span>D765  |.  <span class="number">5</span>E            pop     esi</span><br><span class="line"><span class="number">0040</span>D766  |.  <span class="number">5B</span>            pop     ebx</span><br><span class="line"><span class="number">0040</span>D767  |.  <span class="number">8B</span>E5          mov     esp,ebp</span><br><span class="line"><span class="number">0040</span>D769  |.  <span class="number">5</span>D            pop     ebp</span><br><span class="line"><span class="number">0040</span>D76A  \.  C3            retn</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> a[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="number">0040</span>D740 &gt;/&gt; \<span class="number">55</span>            push    ebp</span><br><span class="line"><span class="number">0040</span>D741  |.  <span class="number">8B</span>EC          mov     ebp,esp</span><br><span class="line"><span class="number">0040</span>D743  |.  <span class="number">83</span>EC <span class="number">44</span>       sub     esp,<span class="number">0x44</span></span><br><span class="line"><span class="number">0040</span>D746  |.  <span class="number">53</span>            push    ebx</span><br><span class="line"><span class="number">0040</span>D747  |.  <span class="number">56</span>            push    esi</span><br><span class="line"><span class="number">0040</span>D748  |.  <span class="number">57</span>            push    edi</span><br><span class="line"><span class="number">0040</span>D749  |.  <span class="number">8</span>D7D BC       lea     edi,[local<span class="number">.17</span>]</span><br><span class="line"><span class="number">0040</span>D74C  |.  B9 <span class="number">11000000</span>   mov     ecx,<span class="number">0x11</span></span><br><span class="line"><span class="number">0040</span>D751  |.  B8 CCCCCCCC   mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">0040</span>D756  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">0040</span>D758  |.  C645 FC <span class="number">01</span>    mov     byte ptr ss:[ebp<span class="number">-0x4</span>],<span class="number">0x1</span></span><br><span class="line"><span class="number">0040</span>D75C  |.  C645 FD <span class="number">02</span>    mov     byte ptr ss:[ebp<span class="number">-0x3</span>],<span class="number">0x2</span></span><br><span class="line"><span class="number">0040</span>D760  |.  C645 FE <span class="number">03</span>    mov     byte ptr ss:[ebp<span class="number">-0x2</span>],<span class="number">0x3</span></span><br><span class="line"><span class="number">0040</span>D764  |.  C645 FF <span class="number">04</span>    mov     byte ptr ss:[ebp<span class="number">-0x1</span>],<span class="number">0x4</span></span><br><span class="line"><span class="number">0040</span>D768  |.  <span class="number">5F</span>            pop     edi</span><br><span class="line"><span class="number">0040</span>D769  |.  <span class="number">5</span>E            pop     esi</span><br><span class="line"><span class="number">0040</span>D76A  |.  <span class="number">5B</span>            pop     ebx</span><br><span class="line"><span class="number">0040</span>D76B  |.  <span class="number">8B</span>E5          mov     esp,ebp</span><br><span class="line"><span class="number">0040</span>D76D  |.  <span class="number">5</span>D            pop     ebp</span><br><span class="line"><span class="number">0040</span>D76E  \.  C3            retn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数组声明是需要常量来提升堆栈，使用时[]内可以是变量</span><br><span class="line">    </span><br><span class="line"><span class="type">char</span> i[<span class="number">3</span>]  <span class="comment">//缓冲区分配40+4</span></span><br><span class="line"><span class="type">char</span> i[<span class="number">4</span>]  <span class="comment">//缓冲区分配40+4</span></span><br><span class="line"><span class="type">short</span> i[<span class="number">4</span>] <span class="comment">//缓冲区分配40+4*2</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//缓冲区分配是按照本机宽度位数的倍数分配的，参考char[3] 和 char[4]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> y = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> r;</span><br><span class="line">    <span class="type">int</span> arr[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    r = arr[<span class="number">1</span>];</span><br><span class="line">    r = arr[x];</span><br><span class="line">    r = arr[x+y];</span><br><span class="line">    r = arr[x*<span class="number">2</span>+y];</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D770 &gt;/&gt; \<span class="number">55</span>                  push    ebp</span><br><span class="line"><span class="number">0040</span>D771  |.  <span class="number">8B</span>EC                mov     ebp,esp</span><br><span class="line"><span class="number">0040</span>D773  |.  <span class="number">83</span>EC <span class="number">74</span>             sub     esp,<span class="number">0x74</span>        ;<span class="number">0x74</span><span class="number">-0x40</span>=<span class="number">0x34</span>=<span class="number">52</span>/<span class="number">4</span>=<span class="number">13</span> = <span class="number">10</span> + <span class="number">1</span> + <span class="number">1</span> + <span class="number">1</span></span><br><span class="line"><span class="number">0040</span>D776  |.  <span class="number">53</span>                  push    ebx</span><br><span class="line"><span class="number">0040</span>D777  |.  <span class="number">56</span>                  push    esi</span><br><span class="line"><span class="number">0040</span>D778  |.  <span class="number">57</span>                  push    edi</span><br><span class="line"><span class="number">0040</span>D779  |.  <span class="number">8</span>D7D <span class="number">8</span>C             lea     edi,[local<span class="number">.29</span>]</span><br><span class="line"><span class="number">0040</span>D77C  |.  B9 <span class="number">1</span>D000000         mov     ecx,<span class="number">0x1D</span></span><br><span class="line"><span class="number">0040</span>D781  |.  B8 CCCCCCCC         mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">0040</span>D786  |.  F3:AB               rep     stos dword ptr es:[edi]</span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D788  |.  C745 FC <span class="number">01000000</span>    mov     [local<span class="number">.1</span>],<span class="number">0x1</span></span><br><span class="line"><span class="number">0040</span>D78F  |.  C745 F8 <span class="number">02000000</span>    mov     [local<span class="number">.2</span>],<span class="number">0x2</span></span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D796  |.  C745 CC <span class="number">01000000</span>    mov     [local<span class="number">.13</span>],<span class="number">0x1</span>      ;低地址在上</span><br><span class="line"><span class="number">0040</span>D79D  |.  C745 D0 <span class="number">02000000</span>    mov     [local<span class="number">.12</span>],<span class="number">0x2</span></span><br><span class="line"><span class="number">0040</span>D7A4  |.  C745 D4 <span class="number">03000000</span>    mov     [local<span class="number">.11</span>],<span class="number">0x3</span></span><br><span class="line"><span class="number">0040</span>D7AB  |.  C745 D8 <span class="number">04000000</span>    mov     [local<span class="number">.10</span>],<span class="number">0x4</span></span><br><span class="line"><span class="number">0040</span>D7B2  |.  C745 DC <span class="number">05000000</span>    mov     [local<span class="number">.9</span>],<span class="number">0x5</span></span><br><span class="line"><span class="number">0040</span>D7B9  |.  C745 E0 <span class="number">06000000</span>    mov     [local<span class="number">.8</span>],<span class="number">0x6</span></span><br><span class="line"><span class="number">0040</span>D7C0  |.  C745 E4 <span class="number">07000000</span>    mov     [local<span class="number">.7</span>],<span class="number">0x7</span></span><br><span class="line"><span class="number">0040</span>D7C7  |.  C745 E8 <span class="number">08000000</span>    mov     [local<span class="number">.6</span>],<span class="number">0x8</span></span><br><span class="line"><span class="number">0040</span>D7CE  |.  C745 EC <span class="number">09000000</span>    mov     [local<span class="number">.5</span>],<span class="number">0x9</span></span><br><span class="line"><span class="number">0040</span>D7D5  |.  C745 F0 <span class="number">00000000</span>    mov     [local<span class="number">.4</span>],<span class="number">0x0</span></span><br><span class="line"></span><br><span class="line">;    r = arr[<span class="number">1</span>];</span><br><span class="line"><span class="number">0040</span>D7DC  |.  <span class="number">8B</span>45 D0             mov     eax,[local<span class="number">.12</span>]                                ; 反汇编中写的是定值，直接取值</span><br><span class="line"><span class="number">0040</span>D7DF  |.  <span class="number">8945</span> F4             mov     [local<span class="number">.3</span>],eax                                 ;r = arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">;    r = arr[x];</span><br><span class="line"><span class="number">0040</span>D7E2  |.  <span class="number">8B</span>4D FC             mov     ecx,[local<span class="number">.1</span>]									; ecx = <span class="number">1</span>     <span class="number">0x34</span> = <span class="number">52</span></span><br><span class="line"><span class="number">0040</span>D7E5  |.  <span class="number">8B</span>548D CC           mov     edx,dword ptr ss:[ebp+ecx*<span class="number">4</span><span class="number">-0x34</span>]             ; edx = <span class="number">4</span><span class="number">-34</span>=ebp<span class="number">-0x30</span>=[local<span class="number">.12</span>]=<span class="number">2</span></span><br><span class="line"><span class="number">0040</span>D7E9  |.  <span class="number">8955</span> F4             mov     [local<span class="number">.3</span>],edx									; r = <span class="number">2</span></span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D7EC  |.  <span class="number">8B</span>45 FC             mov     eax,[local<span class="number">.1</span>]									; <span class="number">1</span></span><br><span class="line"><span class="number">0040</span>D7EF  |.  <span class="number">0345</span> F8             add     eax,[local<span class="number">.2</span>]									; eax = <span class="number">1</span>+<span class="number">2</span> = <span class="number">3</span></span><br><span class="line"><span class="number">0040</span>D7F2  |.  <span class="number">8B</span>4C85 CC           mov     ecx,dword ptr ss:[ebp+eax*<span class="number">4</span><span class="number">-0x34</span>]				; ecx = [ebp<span class="number">-0x28</span>] = [local<span class="number">.10</span>] = <span class="number">4</span></span><br><span class="line"><span class="number">0040</span>D7F6  |.  <span class="number">894</span>D F4             mov     [local<span class="number">.3</span>],ecx									; r = <span class="number">4</span></span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D7F9  |.  <span class="number">8B</span>55 FC             mov     edx,[local<span class="number">.1</span>]									; edx = <span class="number">1</span></span><br><span class="line"><span class="number">0040</span>D7FC  |.  <span class="number">8B</span>45 F8             mov     eax,[local<span class="number">.2</span>]									; eax = <span class="number">2</span></span><br><span class="line"><span class="number">0040</span>D7FF  |.  <span class="number">8</span>D0C50              lea     ecx,dword ptr ds:[eax+edx*<span class="number">2</span>]					; ecx = <span class="number">4</span></span><br><span class="line"><span class="number">0040</span>D802  |.  <span class="number">8B</span>548D CC           mov     edx,dword ptr ss:[ebp+ecx*<span class="number">4</span><span class="number">-0x34</span>]             ; edx = [local<span class="number">.9</span>] = <span class="number">5</span></span><br><span class="line"><span class="number">0040</span>D806  |.  <span class="number">8955</span> F4             mov     [local<span class="number">.3</span>],edx									; r= <span class="number">5</span></span><br><span class="line"><span class="number">0040</span>D809  |.  <span class="number">5F</span>                  pop     edi</span><br><span class="line"><span class="number">0040</span>D80A  |.  <span class="number">5</span>E                  pop     esi</span><br><span class="line"><span class="number">0040</span>D80B  |.  <span class="number">5B</span>                  pop     ebx</span><br><span class="line"><span class="number">0040</span>D80C  |.  <span class="number">8B</span>E5                mov     esp,ebp</span><br><span class="line"><span class="number">0040</span>D80E  |.  <span class="number">5</span>D                  pop     ebp</span><br><span class="line"><span class="number">0040</span>D80F  \.  C3                  retn</span><br><span class="line"></span><br><span class="line">[ebp+ecx*<span class="number">4</span><span class="number">-0x34</span>]  每次减去<span class="number">0x34</span>的原因，<span class="number">0x34</span> = <span class="number">52</span>，是该函数内所有局部变量一共分配的空间</span><br><span class="line">ecx的值即为数组下标,去对应数组的下标即可取到对应的值,注意下标从<span class="number">0</span>开始</span><br><span class="line"><span class="type">short</span> ecx * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="type">int</span> a[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;     <span class="comment">//后面会用0补</span></span><br><span class="line"></span><br><span class="line">二维数组在汇编中和一维数组存储方式一样</span><br><span class="line">    </span><br><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[],[]&#125;     <span class="comment">//编译报错</span></span><br><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;  <span class="comment">//正常执行</span></span><br><span class="line">多维数组只是用户使用方便，编译后的结果都一样</span><br><span class="line"><span class="type">int</span> a[][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;   <span class="comment">//编译通过，编译器四个一组分配</span></span><br><span class="line"><span class="type">int</span> a[<span class="number">3</span>][] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;   <span class="comment">//编译错误</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[<span class="number">5</span>][<span class="number">12</span>] = &#123;&#125;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">7</span>] = arr[<span class="number">1</span>*<span class="number">12</span>+<span class="number">7</span>];</span><br><span class="line"><span class="type">int</span> arr[<span class="number">5</span>][<span class="number">4</span>][<span class="number">3</span>] = arr[<span class="number">1</span>*<span class="number">4</span>*<span class="number">3</span> + <span class="number">2</span>*<span class="number">3</span> + <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">桶排序</span><br><span class="line"><span class="number">1.</span>找数组中最大的，创建max+<span class="number">1</span>个数的数组</span><br><span class="line"><span class="number">2.</span>下标对应改为出现的次数</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">dui</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a[<span class="number">10</span>] = &#123;<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> max = a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> p = <span class="number">1</span>; p &lt; <span class="number">10</span>; p++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (a[p]&gt;max)</span><br><span class="line">		&#123;</span><br><span class="line">			max = a[p];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,max);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> b[max] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= max<span class="number">-1</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		b[a[i]]++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= max<span class="number">-1</span>; i++)</span><br><span class="line">	&#123; </span><br><span class="line">		<span class="type">int</span> k = b[i];</span><br><span class="line">		<span class="keyword">if</span> (k &gt; <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> m = k; m&gt;<span class="number">0</span>; m--)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,i);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	dui();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230113171701402.png" alt="image-20230113171701402"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230114173623044.png" alt="image-20230114173623044"></p>
<h3 id="结构体"><a class="markdownIt-Anchor" href="#结构体">#</a> 结构体</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">float</span> x;</span><br><span class="line">    <span class="type">float</span> y;</span><br><span class="line">    <span class="type">float</span> z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> m_up;</span><br><span class="line">	<span class="type">char</span> m_Name[<span class="number">32</span>];</span><br><span class="line">    <span class="type">int</span> m_Num;</span><br><span class="line">    ...</span><br><span class="line">    B zuobiao;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A aa;</span><br><span class="line"><span class="comment">// aa + 4 //m_up</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A 通过一级偏移找到B zuobiao</span><br><span class="line">zuobiao通过二级偏移找到xyz</span><br><span class="line">    </span><br><span class="line">结构体在创建时不分配空间</span><br><span class="line">A aa;   此时分配空间</span><br><span class="line">aa.fXpos = <span class="number">2.1</span>;</span><br><span class="line"></span><br><span class="line">结构体在定义的时候，除了自身以外，可以存储任何类型</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">struct AA</span><br><span class="line">&#123;</span><br><span class="line">	int m;</span><br><span class="line">	int n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct  st</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	short b;</span><br><span class="line">	char c;</span><br><span class="line">	int arr[10];</span><br><span class="line">	AA aa;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">st x;</span><br><span class="line"></span><br><span class="line">void func()</span><br><span class="line">&#123;</span><br><span class="line">	x.a = 10;</span><br><span class="line">	x.b = 20;</span><br><span class="line">	x.c = 30;</span><br><span class="line">	x.arr[0] = 100;</span><br><span class="line">	x.aa.m = 22;</span><br><span class="line">&#125;</span><br><span class="line">void func2()</span><br><span class="line">&#123;</span><br><span class="line">	int a1  = x.a;</span><br><span class="line">	int y1 = x.arr[0];</span><br><span class="line">	int y2 = x.aa.m;</span><br><span class="line">&#125;</span><br><span class="line">st func()</span><br><span class="line">&#123;</span><br><span class="line">	st s;</span><br><span class="line">	s.a = 1;</span><br><span class="line">	s.b = 2;</span><br><span class="line">	s.c = 3;</span><br><span class="line">	return s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数组和结构体判断</p>
<p>等宽连续 - 数组</p>
<p>连续不等宽 - 大概率结构体</p>
<p>但结构体中都是相同类型的变量也可以逆成数组</p>
<p>结构体尽量定义为全局变量，减少复制次数，尽量不要当参数和返回值</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 结构体作为全局变量</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">st</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">short</span> b;</span><br><span class="line">	<span class="type">char</span> c;</span><br><span class="line">	<span class="type">int</span> arr[<span class="number">10</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">st x;</span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	x.a = <span class="number">10</span>;</span><br><span class="line">	x.b = <span class="number">20</span>;</span><br><span class="line">	x.c = <span class="number">30</span>;</span><br><span class="line">	x.arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	x.arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func2</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a1 = x.a;</span><br><span class="line">	<span class="type">int</span> b1 = x.b;</span><br><span class="line">	<span class="type">int</span> c1 = x.c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	func();</span><br><span class="line">	func2();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">00401030</span> &gt;/&gt; \<span class="number">55</span>            push    ebp</span><br><span class="line"><span class="number">00401031</span>  |.  <span class="number">8B</span>EC          mov     ebp,esp</span><br><span class="line"><span class="number">00401033</span>  |.  <span class="number">83</span>EC <span class="number">40</span>       sub     esp,<span class="number">0x40</span></span><br><span class="line"><span class="number">00401036</span>  |.  <span class="number">53</span>            push    ebx</span><br><span class="line"><span class="number">00401037</span>  |.  <span class="number">56</span>            push    esi</span><br><span class="line"><span class="number">00401038</span>  |.  <span class="number">57</span>            push    edi</span><br><span class="line"><span class="number">00401039</span>  |.  <span class="number">8</span>D7D C0       lea     edi,[local<span class="number">.16</span>]</span><br><span class="line"><span class="number">0040103</span>C  |.  B9 <span class="number">10000000</span>   mov     ecx,<span class="number">0x10</span></span><br><span class="line"><span class="number">00401041</span>  |.  B8 CCCCCCCC   mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">00401046</span>  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">00401048</span>  |.  C705 <span class="number">507</span>C4200&gt;mov     dword ptr ds:[<span class="number">0x427C50</span>],<span class="number">0xA</span></span><br><span class="line"><span class="number">00401052</span>  |.  <span class="number">66</span>:C705 <span class="number">547</span>C4&gt;mov     word ptr ds:[<span class="number">0x427C54</span>],<span class="number">0x14</span></span><br><span class="line"><span class="number">0040105B</span>  |.  C605 <span class="number">567</span>C4200&gt;mov     byte ptr ds:[<span class="number">0x427C56</span>],<span class="number">0x1E</span></span><br><span class="line"><span class="number">00401062</span>  |.  C705 <span class="number">587</span>C4200&gt;mov     dword ptr ds:[<span class="number">0x427C58</span>],<span class="number">0x1</span></span><br><span class="line"><span class="number">0040106</span>C  |.  C705 <span class="number">5</span>C7C4200&gt;mov     dword ptr ds:[<span class="number">0x427C5C</span>],<span class="number">0x2</span></span><br><span class="line"><span class="number">00401076</span>  |.  <span class="number">5F</span>            pop     edi</span><br><span class="line"><span class="number">00401077</span>  |.  <span class="number">5</span>E            pop     esi</span><br><span class="line"><span class="number">00401078</span>  |.  <span class="number">5B</span>            pop     ebx</span><br><span class="line"><span class="number">00401079</span>  |.  <span class="number">8B</span>E5          mov     esp,ebp</span><br><span class="line"><span class="number">0040107B</span>  |.  <span class="number">5</span>D            pop     ebp</span><br><span class="line"><span class="number">0040107</span>C  \.  C3            retn</span><br><span class="line"></span><br><span class="line"><span class="number">00401090</span> &gt;/&gt; \<span class="number">55</span>            push    ebp</span><br><span class="line"><span class="number">00401091</span>  |.  <span class="number">8B</span>EC          mov     ebp,esp</span><br><span class="line"><span class="number">00401093</span>  |.  <span class="number">83</span>EC <span class="number">4</span>C       sub     esp,<span class="number">0x4C</span></span><br><span class="line"><span class="number">00401096</span>  |.  <span class="number">53</span>            push    ebx</span><br><span class="line"><span class="number">00401097</span>  |.  <span class="number">56</span>            push    esi</span><br><span class="line"><span class="number">00401098</span>  |.  <span class="number">57</span>            push    edi</span><br><span class="line"><span class="number">00401099</span>  |.  <span class="number">8</span>D7D B4       lea     edi,[local<span class="number">.19</span>]</span><br><span class="line"><span class="number">0040109</span>C  |.  B9 <span class="number">13000000</span>   mov     ecx,<span class="number">0x13</span></span><br><span class="line"><span class="number">004010</span>A1  |.  B8 CCCCCCCC   mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">004010</span>A6  |.  F3:AB         rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">004010</span>A8  |.  A1 <span class="number">507</span>C4200   mov     eax,dword ptr ds:[<span class="number">0x427C50</span>]</span><br><span class="line"><span class="number">004010</span>AD  |.  <span class="number">8945</span> FC       mov     [local<span class="number">.1</span>],eax</span><br><span class="line"><span class="number">004010B</span>0  |.  <span class="number">0F</span>BF0D <span class="number">547</span>C42&gt;movsx   ecx,word ptr ds:[<span class="number">0x427C54</span>]</span><br><span class="line"><span class="number">004010B</span>7  |.  <span class="number">894</span>D F8       mov     [local<span class="number">.2</span>],ecx</span><br><span class="line"><span class="number">004010B</span>A  |.  <span class="number">0F</span>BE15 <span class="number">567</span>C42&gt;movsx   edx,byte ptr ds:[<span class="number">0x427C56</span>]</span><br><span class="line"><span class="number">004010</span>C1  |.  <span class="number">8955</span> F4       mov     [local<span class="number">.3</span>],edx</span><br><span class="line"><span class="number">004010</span>C4  |.  <span class="number">5F</span>            pop     edi</span><br><span class="line"><span class="number">004010</span>C5  |.  <span class="number">5</span>E            pop     esi</span><br><span class="line"><span class="number">004010</span>C6  |.  <span class="number">5B</span>            pop     ebx</span><br><span class="line"><span class="number">004010</span>C7  |.  <span class="number">8B</span>E5          mov     esp,ebp</span><br><span class="line"><span class="number">004010</span>C9  |.  <span class="number">5</span>D            pop     ebp</span><br><span class="line"><span class="number">004010</span>CA  \.  C3            retn</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体作为局部变量</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pointer</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">float</span> x_pos;</span><br><span class="line">	<span class="type">float</span> y_pos;</span><br><span class="line">	<span class="type">float</span> z_pos;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">short</span> b;</span><br><span class="line">	<span class="type">char</span> c;</span><br><span class="line">	<span class="type">int</span> arr[<span class="number">10</span>];</span><br><span class="line">	Pointer p1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	st x;</span><br><span class="line">	x.a = <span class="number">10</span>;</span><br><span class="line">	x.b = <span class="number">20</span>;</span><br><span class="line">	x.c = <span class="number">30</span>;</span><br><span class="line">	x.arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	x.arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	x.p1.x_pos = <span class="number">2.1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">func</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">00401020</span> &gt;/&gt; \<span class="number">55</span>                    push    ebp</span><br><span class="line"><span class="number">00401021</span>  |.  <span class="number">8B</span>EC                  mov     ebp,esp</span><br><span class="line"><span class="number">00401023</span>  |.  <span class="number">83</span>EC <span class="number">7</span>C               sub     esp,<span class="number">0x7C</span></span><br><span class="line"><span class="number">00401026</span>  |.  <span class="number">53</span>                    push    ebx</span><br><span class="line"><span class="number">00401027</span>  |.  <span class="number">56</span>                    push    esi</span><br><span class="line"><span class="number">00401028</span>  |.  <span class="number">57</span>                    push    edi</span><br><span class="line"><span class="number">00401029</span>  |.  <span class="number">8</span>D7D <span class="number">84</span>               lea     edi,[local<span class="number">.31</span>]</span><br><span class="line"><span class="number">0040102</span>C  |.  B9 <span class="number">1F</span>000000           mov     ecx,<span class="number">0x1F</span></span><br><span class="line"><span class="number">00401031</span>  |.  B8 CCCCCCCC           mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">00401036</span>  |.  F3:AB                 rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">00401038</span>  |.  C745 C4 <span class="number">0</span>A000000      mov     dword ptr ss:[ebp<span class="number">-0x3C</span>],<span class="number">0xA</span></span><br><span class="line"><span class="number">0040103F</span>  |.  <span class="number">66</span>:C745 C8 <span class="number">1400</span>       mov     word ptr ss:[ebp<span class="number">-0x38</span>],<span class="number">0x14</span></span><br><span class="line"><span class="number">00401045</span>  |.  C645 CA <span class="number">1</span>E            mov     byte ptr ss:[ebp<span class="number">-0x36</span>],<span class="number">0x1E</span></span><br><span class="line"><span class="number">00401049</span>  |.  C745 CC <span class="number">01000000</span>      mov     dword ptr ss:[ebp<span class="number">-0x34</span>],<span class="number">0x1</span></span><br><span class="line"><span class="number">00401050</span>  |.  C745 D0 <span class="number">02000000</span>      mov     dword ptr ss:[ebp<span class="number">-0x30</span>],<span class="number">0x2</span></span><br><span class="line"><span class="number">00401057</span>  |.  C745 F4 <span class="number">66660640</span>      mov     dword ptr ss:[ebp<span class="number">-0xC</span>],<span class="number">0x40066666</span></span><br><span class="line"><span class="number">0040105</span>E  |.  <span class="number">5F</span>                    pop     edi</span><br><span class="line"><span class="number">0040105F</span>  |.  <span class="number">5</span>E                    pop     esi</span><br><span class="line"><span class="number">00401060</span>  |.  <span class="number">5B</span>                    pop     ebx</span><br><span class="line"><span class="number">00401061</span>  |.  <span class="number">8B</span>E5                  mov     esp,ebp</span><br><span class="line"><span class="number">00401063</span>  |.  <span class="number">5</span>D                    pop     ebp</span><br><span class="line"><span class="number">00401064</span>  \.  C3                    retn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//当结构体中变量不等宽时，分空间不再按照本机宽度分</span></span><br><span class="line"><span class="comment">//局部变量int+short+char 还是按照12字节分</span></span><br><span class="line"><span class="comment">//结构体中变量等宽时和局部变量一样</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line">	<span class="type">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	st x;</span><br><span class="line">	x.a = <span class="number">10</span>;</span><br><span class="line">	x.b = <span class="number">20</span>;</span><br><span class="line">	x.c = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line">	<span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> arr[<span class="number">3</span>] = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">func</span>();</span><br><span class="line">	<span class="built_in">func2</span>();</span><br><span class="line">    <span class="built_in">func3</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func</span><br><span class="line"><span class="number">00401020</span> &gt;/&gt; \<span class="number">55</span>                   push    ebp</span><br><span class="line"><span class="number">00401021</span>  |.  <span class="number">8B</span>EC                 mov     ebp,esp</span><br><span class="line"><span class="number">00401023</span>  |.  <span class="number">83</span>EC <span class="number">4</span>C              sub     esp,<span class="number">0x4C</span></span><br><span class="line"><span class="number">00401026</span>  |.  <span class="number">53</span>                   push    ebx</span><br><span class="line"><span class="number">00401027</span>  |.  <span class="number">56</span>                   push    esi</span><br><span class="line"><span class="number">00401028</span>  |.  <span class="number">57</span>                   push    edi</span><br><span class="line"><span class="number">00401029</span>  |.  <span class="number">8</span>D7D B4              lea     edi,[local<span class="number">.19</span>]</span><br><span class="line"><span class="number">0040102</span>C  |.  B9 <span class="number">13000000</span>          mov     ecx,<span class="number">0x13</span></span><br><span class="line"><span class="number">00401031</span>  |.  B8 CCCCCCCC          mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">00401036</span>  |.  F3:AB                rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">00401038</span>  |.  C745 F4 <span class="number">0</span>A000000     mov     [local<span class="number">.3</span>],<span class="number">0xA</span></span><br><span class="line"><span class="number">0040103F</span>  |.  C745 F8 <span class="number">14000000</span>     mov     [local<span class="number">.2</span>],<span class="number">0x14</span></span><br><span class="line"><span class="number">00401046</span>  |.  C745 FC <span class="number">1E000000</span>     mov     [local<span class="number">.1</span>],<span class="number">0x1E</span></span><br><span class="line"><span class="number">0040104</span>D  |.  <span class="number">5F</span>                   pop     edi</span><br><span class="line"><span class="number">0040104</span>E  |.  <span class="number">5</span>E                   pop     esi</span><br><span class="line"><span class="number">0040104F</span>  |.  <span class="number">5B</span>                   pop     ebx</span><br><span class="line"><span class="number">00401050</span>  |.  <span class="number">8B</span>E5                 mov     esp,ebp</span><br><span class="line"><span class="number">00401052</span>  |.  <span class="number">5</span>D                   pop     ebp</span><br><span class="line"><span class="number">00401053</span>  \.  C3                   retn</span><br><span class="line"></span><br><span class="line">func2</span><br><span class="line"><span class="number">00401080</span> &gt;/&gt; \<span class="number">55</span>                   push    ebp</span><br><span class="line"><span class="number">00401081</span>  |.  <span class="number">8B</span>EC                 mov     ebp,esp</span><br><span class="line"><span class="number">00401083</span>  |.  <span class="number">83</span>EC <span class="number">4</span>C              sub     esp,<span class="number">0x4C</span></span><br><span class="line"><span class="number">00401086</span>  |.  <span class="number">53</span>                   push    ebx</span><br><span class="line"><span class="number">00401087</span>  |.  <span class="number">56</span>                   push    esi</span><br><span class="line"><span class="number">00401088</span>  |.  <span class="number">57</span>                   push    edi</span><br><span class="line"><span class="number">00401089</span>  |.  <span class="number">8</span>D7D B4              lea     edi,[local<span class="number">.19</span>]</span><br><span class="line"><span class="number">0040108</span>C  |.  B9 <span class="number">13000000</span>          mov     ecx,<span class="number">0x13</span></span><br><span class="line"><span class="number">00401091</span>  |.  B8 CCCCCCCC          mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">00401096</span>  |.  F3:AB                rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">00401098</span>  |.  C745 FC <span class="number">0</span>A000000     mov     [local<span class="number">.1</span>],<span class="number">0xA</span></span><br><span class="line"><span class="number">0040109F</span>  |.  C745 F8 <span class="number">14000000</span>     mov     [local<span class="number">.2</span>],<span class="number">0x14</span></span><br><span class="line"><span class="number">004010</span>A6  |.  C745 F4 <span class="number">1E000000</span>     mov     [local<span class="number">.3</span>],<span class="number">0x1E</span></span><br><span class="line"><span class="number">004010</span>AD  |.  <span class="number">5F</span>                   pop     edi</span><br><span class="line"><span class="number">004010</span>AE  |.  <span class="number">5</span>E                   pop     esi</span><br><span class="line"><span class="number">004010</span>AF  |.  <span class="number">5B</span>                   pop     ebx</span><br><span class="line"><span class="number">004010B</span>0  |.  <span class="number">8B</span>E5                 mov     esp,ebp</span><br><span class="line"><span class="number">004010B</span>2  |.  <span class="number">5</span>D                   pop     ebp</span><br><span class="line"><span class="number">004010B</span>3  \.  C3                   retn</span><br><span class="line"></span><br><span class="line">func3</span><br><span class="line"><span class="number">004106F</span>0 &gt;/&gt; \<span class="number">55</span>                    push    ebp</span><br><span class="line"><span class="number">004106F</span>1  |.  <span class="number">8B</span>EC                  mov     ebp,esp</span><br><span class="line"><span class="number">004106F</span>3  |.  <span class="number">83</span>EC <span class="number">4</span>C               sub     esp,<span class="number">0x4C</span></span><br><span class="line"><span class="number">004106F</span>6  |.  <span class="number">53</span>                    push    ebx</span><br><span class="line"><span class="number">004106F</span>7  |.  <span class="number">56</span>                    push    esi</span><br><span class="line"><span class="number">004106F</span>8  |.  <span class="number">57</span>                    push    edi</span><br><span class="line"><span class="number">004106F</span>9  |.  <span class="number">8</span>D7D B4               lea     edi,[local<span class="number">.19</span>]</span><br><span class="line"><span class="number">004106F</span>C  |.  B9 <span class="number">13000000</span>   		mov     ecx,<span class="number">0x13</span></span><br><span class="line"><span class="number">00410701</span>  |.  B8 CCCCCCCC   		mov     eax,<span class="number">0xCCCCCCCC</span></span><br><span class="line"><span class="number">00410706</span>  |.  F3:AB         		rep     stos dword ptr es:[edi]</span><br><span class="line"><span class="number">00410708</span>  |.  C745 F4 <span class="number">0</span>A000&gt;		mov     [local<span class="number">.3</span>],<span class="number">0xA</span></span><br><span class="line"><span class="number">0041070F</span>  |.  C745 F8 <span class="number">14000</span>&gt;		mov     [local<span class="number">.2</span>],<span class="number">0x14</span></span><br><span class="line"><span class="number">00410716</span>  |.  C745 FC <span class="number">1E000</span>&gt;		mov     [local<span class="number">.1</span>],<span class="number">0x1E</span></span><br><span class="line"><span class="number">0041071</span>D  |.  <span class="number">5F</span>            		pop     edi</span><br><span class="line"><span class="number">0041071</span>E  |.  <span class="number">5</span>E            		pop     esi</span><br><span class="line"><span class="number">0041071F</span>  |.  <span class="number">5B</span>            		pop     ebx</span><br><span class="line"><span class="number">00410720</span>  |.  <span class="number">8B</span>E5          		mov     esp,ebp</span><br><span class="line"><span class="number">00410722</span>  |.  <span class="number">5</span>D            		pop     ebp</span><br><span class="line"><span class="number">00410723</span>  \.  C3            		retn</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>结构体可以作为参数和返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">struct st</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	short b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void func(st x)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	st x;</span><br><span class="line">	x.a = 1;</span><br><span class="line">	x.b = 2;</span><br><span class="line">	x.c = 3;</span><br><span class="line">	func(x);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">00401040 55                   push        ebp</span><br><span class="line">00401041 8B EC                mov         ebp,esp</span><br><span class="line">00401043 83 EC 48             sub         esp,48h</span><br><span class="line">00401046 53                   push        ebx</span><br><span class="line">00401047 56                   push        esi</span><br><span class="line">00401048 57                   push        edi</span><br><span class="line">00401049 8D 7D B8             lea         edi,[ebp-48h]</span><br><span class="line">0040104C B9 12 00 00 00       mov         ecx,12h</span><br><span class="line">00401051 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">00401056 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">00401058 C7 45 F8 01 00 00 00 mov         dword ptr [ebp-8],1</span><br><span class="line">0040105F 66 C7 45 FC 02 00    mov         word ptr [ebp-4],offset main+23h (00401063)</span><br><span class="line">00401065 C6 45 FE 03          mov         byte ptr [ebp-2],3</span><br><span class="line">00401069 8B 45 FC             mov         eax,dword ptr [ebp-4]</span><br><span class="line">0040106C 50                   push        eax</span><br><span class="line">0040106D 8B 4D F8             mov         ecx,dword ptr [ebp-8]</span><br><span class="line">00401070 51                   push        ecx</span><br><span class="line">00401071 E8 A3 FF FF FF       call        @ILT+20(func) (00401019)</span><br><span class="line">00401076 83 C4 08             add         esp,8</span><br><span class="line">00401079 33 C0                xor         eax,eax</span><br><span class="line">0040107B 5F                   pop         edi</span><br><span class="line">0040107C 5E                   pop         esi</span><br><span class="line">0040107D 5B                   pop         ebx</span><br><span class="line">0040107E 83 C4 48             add         esp,48h</span><br><span class="line">00401081 3B EC                cmp         ebp,esp</span><br><span class="line">00401083 E8 E8 00 00 00       call        __chkesp (00401170)</span><br><span class="line">00401088 8B E5                mov         esp,ebp</span><br><span class="line">0040108A 5D                   pop         ebp</span><br><span class="line">0040108B C3                   ret</span><br><span class="line"></span><br><span class="line">ebp-4</span><br><span class="line">0018FF44  02 00 03 CC 88 FF 18</span><br><span class="line">ebp-8</span><br><span class="line">0018FF40  01 00 00 00 02 00 03</span><br><span class="line">第二次push的时候把short和char一起push了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct st</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	int b;</span><br><span class="line">	int c;</span><br><span class="line">	int d;</span><br><span class="line">	int e;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void func(st x)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	st x;</span><br><span class="line">	x.a = 1;</span><br><span class="line">	x.b = 2;</span><br><span class="line">	x.c = 3;</span><br><span class="line">	x.d = 4;</span><br><span class="line">	x.e = 5;</span><br><span class="line">	func(x);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">00401040 55                   push        ebp</span><br><span class="line">00401041 8B EC                mov         ebp,esp</span><br><span class="line">00401043 83 EC 54             sub         esp,54h</span><br><span class="line">00401046 53                   push        ebx</span><br><span class="line">00401047 56                   push        esi</span><br><span class="line">00401048 57                   push        edi</span><br><span class="line">00401049 8D 7D AC             lea         edi,[ebp-54h]</span><br><span class="line">0040104C B9 15 00 00 00       mov         ecx,15h</span><br><span class="line">00401051 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">00401056 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">00401058 C7 45 EC 01 00 00 00 mov         dword ptr [ebp-14h],1</span><br><span class="line">0040105F C7 45 F0 02 00 00 00 mov         dword ptr [ebp-10h],2</span><br><span class="line">00401066 C7 45 F4 03 00 00 00 mov         dword ptr [ebp-0Ch],3</span><br><span class="line">0040106D C7 45 F8 04 00 00 00 mov         dword ptr [ebp-8],4</span><br><span class="line">00401074 C7 45 FC 05 00 00 00 mov         dword ptr [ebp-4],5</span><br><span class="line">0040107B 83 EC 14             sub         esp,14h</span><br><span class="line">0040107E B9 05 00 00 00       mov         ecx,5</span><br><span class="line">00401083 8D 75 EC             lea         esi,[ebp-14h]</span><br><span class="line">00401086 8B FC                mov         edi,esp</span><br><span class="line">00401088 F3 A5                rep movs    dword ptr [edi],dword ptr [esi]</span><br><span class="line">0040108A E8 8A FF FF FF       call        @ILT+20(func) (00401019)</span><br><span class="line">0040108F 83 C4 14             add         esp,14h</span><br><span class="line">00401092 33 C0                xor         eax,eax</span><br><span class="line">00401094 5F                   pop         edi</span><br><span class="line">00401095 5E                   pop         esi</span><br><span class="line">00401096 5B                   pop         ebx</span><br><span class="line">00401097 83 C4 54             add         esp,54h</span><br><span class="line">0040109A 3B EC                cmp         ebp,esp</span><br><span class="line">0040109C E8 CF 00 00 00       call        __chkesp (00401170)</span><br><span class="line">004010A1 8B E5                mov         esp,ebp</span><br><span class="line">004010A3 5D                   pop         ebp</span><br><span class="line">004010A4 C3                   ret</span><br><span class="line"></span><br><span class="line">此时传参和push原理一样，此时先把所有堆栈提升，再填充提升的堆栈</span><br><span class="line">结构体传参通过堆栈传参</span><br></pre></td></tr></table></figure>
<p>结构体作为返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">00401040 55                   push        ebp</span><br><span class="line">00401041 8B EC                mov         ebp,esp</span><br><span class="line">00401043 83 EC 70             sub         esp,70h</span><br><span class="line">00401046 53                   push        ebx</span><br><span class="line">00401047 56                   push        esi</span><br><span class="line">00401048 57                   push        edi</span><br><span class="line">00401049 8D 7D 90             lea         edi,[ebp-70h]</span><br><span class="line">0040104C B9 1C 00 00 00       mov         ecx,1Ch</span><br><span class="line">00401051 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">00401056 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">00401058 8D 45 D0             lea         eax,[ebp-30h]</span><br><span class="line">0040105B 50                   push        eax</span><br><span class="line">0040105C E8 BD FF FF FF       call        @ILT+25(func3) (0040101e)</span><br><span class="line">00401061 83 C4 04             add         esp,4</span><br><span class="line"></span><br><span class="line">00401064 8B 08                mov         ecx,dword ptr [eax]</span><br><span class="line">00401066 89 4D E0             mov         dword ptr [ebp-20h],ecx</span><br><span class="line">00401069 8B 50 04             mov         edx,dword ptr [eax+4]</span><br><span class="line">0040106C 89 55 E4             mov         dword ptr [ebp-1Ch],edx</span><br><span class="line">0040106F 8B 48 08             mov         ecx,dword ptr [eax+8]</span><br><span class="line">00401072 89 4D E8             mov         dword ptr [ebp-18h],ecx</span><br><span class="line">00401075 8B 50 0C             mov         edx,dword ptr [eax+0Ch]</span><br><span class="line">00401078 89 55 EC             mov         dword ptr [ebp-14h],edx</span><br><span class="line">0040107B 8B 45 E0             mov         eax,dword ptr [ebp-20h]</span><br><span class="line">0040107E 89 45 F0             mov         dword ptr [ebp-10h],eax</span><br><span class="line">00401081 8B 4D E4             mov         ecx,dword ptr [ebp-1Ch]</span><br><span class="line">00401084 89 4D F4             mov         dword ptr [ebp-0Ch],ecx</span><br><span class="line">00401087 8B 55 E8             mov         edx,dword ptr [ebp-18h]</span><br><span class="line">0040108A 89 55 F8             mov         dword ptr [ebp-8],edx</span><br><span class="line">0040108D 8B 45 EC             mov         eax,dword ptr [ebp-14h]</span><br><span class="line">00401090 89 45 FC             mov         dword ptr [ebp-4],eax</span><br><span class="line">00401093 33 C0                xor         eax,eax</span><br><span class="line">00401095 5F                   pop         edi</span><br><span class="line">00401096 5E                   pop         esi</span><br><span class="line">00401097 5B                   pop         ebx</span><br><span class="line">00401098 83 C4 70             add         esp,70h</span><br><span class="line">0040109B 3B EC                cmp         ebp,esp</span><br><span class="line">0040109D E8 CE 00 00 00       call        __chkesp (00401170)</span><br><span class="line">004010A2 8B E5                mov         esp,ebp</span><br><span class="line">004010A4 5D                   pop         ebp</span><br><span class="line">004010A5 C3                   ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">004106F0 55                   push        ebp</span><br><span class="line">004106F1 8B EC                mov         ebp,esp</span><br><span class="line">004106F3 83 EC 50             sub         esp,50h</span><br><span class="line">004106F6 53                   push        ebx</span><br><span class="line">004106F7 56                   push        esi</span><br><span class="line">004106F8 57                   push        edi</span><br><span class="line">004106F9 8D 7D B0             lea         edi,[ebp-50h]</span><br><span class="line">004106FC B9 14 00 00 00       mov         ecx,14h</span><br><span class="line">00410701 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">00410706 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">00410708 C7 45 F0 01 00 00 00 mov         dword ptr [ebp-10h],1</span><br><span class="line">0041070F 66 C7 45 F4 02 00    mov         word ptr [ebp-0Ch],offset func+23h (00410713)</span><br><span class="line">00410715 C6 45 F6 03          mov         byte ptr [ebp-0Ah],3</span><br><span class="line">00410719 C7 45 F8 04 00 00 00 mov         dword ptr [ebp-8],4</span><br><span class="line">00410720 C7 45 FC 05 00 00 00 mov         dword ptr [ebp-4],5</span><br><span class="line"></span><br><span class="line">00410727 8B 45 08             mov         eax,dword ptr [ebp+8]</span><br><span class="line">0041072A 8B 4D F0             mov         ecx,dword ptr [ebp-10h]</span><br><span class="line">0041072D 89 08                mov         dword ptr [eax],ecx</span><br><span class="line">0041072F 8B 55 F4             mov         edx,dword ptr [ebp-0Ch]</span><br><span class="line">00410732 89 50 04             mov         dword ptr [eax+4],edx</span><br><span class="line">00410735 8B 4D F8             mov         ecx,dword ptr [ebp-8]</span><br><span class="line">00410738 89 48 08             mov         dword ptr [eax+8],ecx</span><br><span class="line">0041073B 8B 55 FC             mov         edx,dword ptr [ebp-4]</span><br><span class="line">0041073E 89 50 0C             mov         dword ptr [eax+0Ch],edx</span><br><span class="line">00410741 8B 45 08             mov         eax,dword ptr [ebp+8]</span><br><span class="line"></span><br><span class="line">00410744 5F                   pop         edi</span><br><span class="line">00410745 5E                   pop         esi</span><br><span class="line">00410746 5B                   pop         ebx</span><br><span class="line">00410747 8B E5                mov         esp,ebp</span><br><span class="line">00410749 5D                   pop         ebp</span><br><span class="line">0041074A C3                   ret</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>总结：如果不用指针，别声明结构体为局部变量，别把结构体当做返回值和参数</p>
<hr>
<p>sizeof</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">sizeof(char);</span><br><span class="line"></span><br><span class="line">char arr1[10]</span><br><span class="line">short arr2[10]   //20</span><br><span class="line">int arr3[10]     //40</span><br><span class="line"></span><br><span class="line">sizeof(arr1)     //10</span><br><span class="line">sizeof(arr1[10])   //1</span><br><span class="line"></span><br><span class="line">struct s1</span><br><span class="line">&#123;</span><br><span class="line">	char a;</span><br><span class="line">	int b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;   //12</span><br><span class="line">a 0 0 0</span><br><span class="line">b b b b</span><br><span class="line">c 0 0 0</span><br><span class="line">struct s2</span><br><span class="line">&#123;</span><br><span class="line">	int c;</span><br><span class="line">	char a;</span><br><span class="line">	char b;</span><br><span class="line">&#125;;   //8</span><br><span class="line">c c c c</span><br><span class="line">a b 0 0</span><br><span class="line"></span><br><span class="line">sizeof(s1);    //12</span><br><span class="line">sizeof(s2);    //8</span><br><span class="line"></span><br><span class="line">对齐参数：结构体中参数以几字节对齐,取值1,2,4,8 默认为8</span><br><span class="line">#pragma pack(1)</span><br><span class="line">struct ha</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	__int64 b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;</span><br><span class="line">#pragma pack()</span><br><span class="line">sizeof(ha)   //13</span><br><span class="line"></span><br><span class="line">如果这个值比结构体成员的sizeof值小，那么该成员的偏移量应该以此值为准，即是说，结构体成员的偏移量应该取二者的最小值.</span><br><span class="line"></span><br><span class="line">#pragma pack(2)</span><br><span class="line">struct ha</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	__int64 b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;</span><br><span class="line">#pragma pack()</span><br><span class="line">sizeof(ha)   //14</span><br><span class="line"></span><br><span class="line">#pragma pack(4)</span><br><span class="line">struct ha</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	__int64 b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;</span><br><span class="line">#pragma pack()</span><br><span class="line">sizeof(ha)   //16</span><br><span class="line"></span><br><span class="line">#pragma pack(4)</span><br><span class="line">struct ha</span><br><span class="line">&#123;</span><br><span class="line">	int a;</span><br><span class="line">	__int64 b;</span><br><span class="line">	char c;</span><br><span class="line">&#125;;</span><br><span class="line">#pragma pack()</span><br><span class="line">sizeof(ha)   //24</span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122135557244.png" alt="image-20230122135557244"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122140313752.png" alt="image-20230122140313752"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122140354031.png" alt="image-20230122140354031"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对齐原则</span><br><span class="line">原则一:数据成员对齐规则。结构的数据成员，第一个数据成员放在offset为0的地方，以后每个数据成员存储的起始位置要从该成员大小的整数倍开始(比如int在32位机为4字节，则要从4的整数倍地址开始存储).</span><br><span class="line">原则二:结构体的总大小，也就是sizeof的结果，必须是其内部最大成员的整数倍，不足的要补齐。</span><br><span class="line">原则三:如果一个结构里有某些结构体成员，则结构体成员要从其内部最大元素大小的整数倍地址开始存储。(struct a里存有struct b， b里有char，int，double等元素，那b应该从8的整数倍开始存储.)</span><br><span class="line">原则四:对齐参数如果比结构体成员的sizeof值小，该成员的偏移量应该以此值为准.也就是说，结构体成员的偏移量应该取二者的最小值.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122141122230.png" alt="image-20230122141122230"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122142241459.png" alt="image-20230122142241459"></p>
<p>取结构体中变量最大的和默认相比，取小的</p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122142505891.png" alt="image-20230122142505891"></p>
<p><strong>按照数据型由小到大的顺序进行书写</strong></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230122142714801.png" alt="image-20230122142714801"></p>
<p>嵌套结构体按照嵌套的结构体中变量最大的是对齐宽度，但结构体还是按照原来大小累加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">struct S1</span><br><span class="line">&#123;</span><br><span class="line">	//16</span><br><span class="line">	char c;</span><br><span class="line">	double i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct S3</span><br><span class="line">&#123;</span><br><span class="line">	//32</span><br><span class="line">	char c1;</span><br><span class="line">	S1 s;</span><br><span class="line">	char c2;</span><br><span class="line">	char c3;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct S4</span><br><span class="line">&#123;</span><br><span class="line">	//40</span><br><span class="line">	char c1;</span><br><span class="line">	S1 s;</span><br><span class="line">	char c2;</span><br><span class="line">	double c3;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct S5</span><br><span class="line">&#123;</span><br><span class="line">	//16</span><br><span class="line">	int c1;</span><br><span class="line">	char c2[10];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">&#123;</span><br><span class="line">	printf(&quot;%d %d %d %d %d\n&quot;,sizeof(S1),sizeof(S3),sizeof(S4),sizeof(S5),sizeof(1));</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="typedef"><a class="markdownIt-Anchor" href="#typedef">#</a> typedef</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">typedef为C语言的关键字，作用是为一种数据类型定义一个新名字。这里的数据类型包括内部数据类型(int, char等)和自定</span><br><span class="line"></span><br><span class="line">typedef unsigned char BYTE;</span><br><span class="line"></span><br><span class="line">typedef int vector[10];</span><br><span class="line">vector v;</span><br><span class="line">v[0] = 1;</span><br><span class="line"></span><br><span class="line">typedef struct student</span><br><span class="line">&#123;</span><br><span class="line">	char a[10];</span><br><span class="line">&#125;stu;</span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">	stu s;</span><br><span class="line">	s.a[0] = &#x27;a&#x27;;</span><br><span class="line">	s.a[1] = &#x27;b&#x27;;</span><br><span class="line">	s.a[2] = &#x27;c&#x27;;</span><br><span class="line">	s.a[3] = &#x27;\0&#x27;;  //s.a[3] = 0;   \0和0都是结束符号</span><br><span class="line">	printf(&quot;%s&quot;,s.arr);    //abc</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stu 是 student结构体的别名，两个都可以使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#include &quot;string.h&quot;</span><br><span class="line">strcpy(s.arr,&quot;china&quot;);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">nPos</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">float</span> x;</span><br><span class="line">	<span class="type">float</span> y;</span><br><span class="line">	<span class="type">float</span> z;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Monster</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> id;</span><br><span class="line">	<span class="type">char</span> name[<span class="number">32</span>];</span><br><span class="line">	<span class="type">int</span> Hp;</span><br><span class="line">	<span class="type">int</span> blue;</span><br><span class="line">	nPos pos;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Monster mon[<span class="number">10</span>];   <span class="comment">//结构体数组</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">value</span><span class="params">(<span class="type">int</span> n,<span class="type">char</span> *name,<span class="type">int</span> hp,<span class="type">int</span> blue, <span class="type">float</span> x,<span class="type">float</span> y,<span class="type">float</span> z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	mon[i].name = name;</span><br><span class="line">	mon[i].pos.x = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (mon[i].id == x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch"><a class="markdownIt-Anchor" href="#switch">#</a> Switch</h3>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230123104349398.png" alt="image-20230123104349398"></p>
<p>case 后面必须是常量表达式</p>
<p>case 后常量表达式的值不能一样</p>
<p>switch 后面表达式必须为整数</p>
<p>没有 break 时会顺序向下执行，直到遇到 break</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	func(<span class="number">2</span>);     <span class="comment">//2</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> x)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">	func(<span class="number">2</span>);   <span class="comment">//234</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//表达式都不成立执行default，default可以省略但不建议</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>switch 反汇编分析</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">00401020</span> <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">00401021</span> <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">00401023</span> <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">00401026</span> <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">00401027</span> <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">00401028</span> <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">00401029</span> <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040102</span>C B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">00401031</span> B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">00401036</span> F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"></span><br><span class="line"><span class="number">00401038</span> <span class="number">8B</span> <span class="number">45</span> <span class="number">08</span>             mov         eax,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">0040103B</span> <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040103</span>E <span class="number">83</span> <span class="number">7</span>D FC <span class="number">01</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">1</span></span><br><span class="line"><span class="number">00401042</span> <span class="number">74</span> <span class="number">0</span>E                je          func+<span class="number">32</span>h (<span class="number">00401052</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">00401044</span> <span class="number">83</span> <span class="number">7</span>D FC <span class="number">02</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">2</span></span><br><span class="line"><span class="number">00401048</span> <span class="number">74</span> <span class="number">17</span>                je          func+<span class="number">41</span>h (<span class="number">00401061</span>)</span><br><span class="line"><span class="number">0040104</span>A <span class="number">83</span> <span class="number">7</span>D FC <span class="number">03</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">3</span></span><br><span class="line"><span class="number">0040104</span>E <span class="number">74</span> <span class="number">20</span>                je          func+<span class="number">50</span>h (<span class="number">00401070</span>)</span><br><span class="line"><span class="number">00401050</span> EB <span class="number">2</span>D                jmp         func+<span class="number">5F</span>h (<span class="number">0040107f</span>)</span><br><span class="line"><span class="number">00401052</span> <span class="number">68</span> <span class="number">28</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;1&quot;</span> (<span class="number">00422028</span>)</span><br><span class="line"><span class="number">00401057</span> E8 E4 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       <span class="function">call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040105C 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040105F EB 2B                jmp         func+6<span class="title">Ch</span> <span class="params">(<span class="number">0040108</span>c)</span></span></span><br><span class="line"><span class="function">00401061 68 24 20 42 00       push        offset string &quot;2&quot; <span class="params">(<span class="number">00422024</span>)</span></span></span><br><span class="line"><span class="function">00401066 E8 D5 00 00 00       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040106B 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040106E EB 1C                jmp         func+6<span class="title">Ch</span> <span class="params">(<span class="number">0040108</span>c)</span></span></span><br><span class="line"><span class="function">00401070 68 20 20 42 00       push        offset string &quot;4&quot; <span class="params">(<span class="number">00422020</span>)</span></span></span><br><span class="line"><span class="function">00401075 E8 C6 00 00 00       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040107A 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040107D EB 0D                jmp         func+6<span class="title">Ch</span> <span class="params">(<span class="number">0040108</span>c)</span></span></span><br><span class="line"><span class="function">0040107F 68 1C 20 42 00       push        offset string &quot;5&quot; <span class="params">(<span class="number">0042201</span>c)</span></span></span><br><span class="line"><span class="function">00401084 E8 B7 00 00 00       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">00401089 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040108C 5F                   pop         edi</span></span><br><span class="line"><span class="function">0040108D 5E                   pop         esi</span></span><br><span class="line"><span class="function">0040108E 5B                   pop         ebx</span></span><br><span class="line"><span class="function">0040108F 83 C4 44             add         esp,44h</span></span><br><span class="line"><span class="function">00401092 3B EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function">00401094 E8 27 01 00 00       call        __<span class="title">chkesp</span> <span class="params">(<span class="number">004011</span>c0)</span></span></span><br><span class="line"><span class="function">00401099 8B E5                mov         esp,ebp</span></span><br><span class="line"><span class="function">0040109B 5D                   pop         ebp</span></span><br><span class="line"><span class="function">0040109C C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//分支条件比较少时&lt;4和if-else反汇编类似</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//分支大于4时在内存中生成大表  [edx*4+4010B1h]通过寻址</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">func</span>(<span class="number">2</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="number">00401020</span> <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">00401021</span> <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">00401023</span> <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">00401026</span> <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">00401027</span> <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">00401028</span> <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">00401029</span> <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040102</span>C B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">00401031</span> B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">00401036</span> F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"><span class="number">00401038</span> <span class="number">8B</span> <span class="number">45</span> <span class="number">08</span>             mov         eax,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">0040103B</span> <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040103</span>E <span class="number">8B</span> <span class="number">4</span>D FC             mov         ecx,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">00401041</span> <span class="number">83</span> E9 <span class="number">01</span>             sub         ecx,<span class="number">1</span></span><br><span class="line"><span class="number">00401044</span> <span class="number">89</span> <span class="number">4</span>D FC             mov         dword ptr [ebp<span class="number">-4</span>],ecx</span><br><span class="line"><span class="number">00401047</span> <span class="number">83</span> <span class="number">7</span>D FC <span class="number">03</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">3</span></span><br><span class="line"><span class="number">0040104B</span> <span class="number">77</span> <span class="number">46</span>                ja          $L539+<span class="number">0F</span>h (<span class="number">00401093</span>)</span><br><span class="line"><span class="number">0040104</span>D <span class="number">8B</span> <span class="number">55</span> FC             mov         edx,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">00401050</span> FF <span class="number">24</span> <span class="number">95</span> B1 <span class="number">10</span> <span class="number">40</span> <span class="number">00</span> jmp         dword ptr [edx*<span class="number">4</span>+<span class="number">4010B</span>1h]</span><br><span class="line">$L533:</span><br><span class="line"><span class="number">00401057</span> <span class="number">68</span> <span class="number">2</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;1&quot;</span> (<span class="number">0042202</span>c)</span><br><span class="line"><span class="number">0040105</span>C E8 DF <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       <span class="function">call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">00401061 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">00401064 EB 3A                jmp         $L539+1<span class="title">Ch</span> <span class="params">(<span class="number">004010</span>a0)</span></span></span><br><span class="line"><span class="function">$L535:</span></span><br><span class="line"><span class="function"><span class="number">00401066</span> <span class="number">68</span> <span class="number">28</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;2&quot;</span> (<span class="number">00422028</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040106B</span> E8 D0 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">00401070</span> <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">00401073</span> EB <span class="number">2B</span>                jmp         $L539+<span class="number">1</span>Ch (<span class="number">004010</span>a0)</span></span><br><span class="line"><span class="function">$L537:</span></span><br><span class="line"><span class="function"><span class="number">00401075</span> <span class="number">68</span> <span class="number">24</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;3&quot;</span> (<span class="number">00422024</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040107</span>A E8 C1 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040107F</span> <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">00401082</span> EB <span class="number">1</span>C                jmp         $L539+<span class="number">1</span>Ch (<span class="number">004010</span>a0)</span></span><br><span class="line"><span class="function">$L539:</span></span><br><span class="line"><span class="function"><span class="number">00401084</span> <span class="number">68</span> <span class="number">20</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;4&quot;</span> (<span class="number">00422020</span>)</span></span><br><span class="line"><span class="function"><span class="number">00401089</span> E8 B2 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040108</span>E <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">00401091</span> EB <span class="number">0</span>D                jmp         $L539+<span class="number">1</span>Ch (<span class="number">004010</span>a0)</span></span><br><span class="line"><span class="function"><span class="number">00401093</span> <span class="number">68</span> <span class="number">1</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;5&quot;</span> (<span class="number">0042201</span>c)</span></span><br><span class="line"><span class="function"><span class="number">00401098</span> E8 A3 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040109</span>D <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">004010</span>A0 <span class="number">5F</span>                   pop         edi</span></span><br><span class="line"><span class="function"><span class="number">004010</span>A1 <span class="number">5</span>E                   pop         esi</span></span><br><span class="line"><span class="function"><span class="number">004010</span>A2 <span class="number">5B</span>                   pop         ebx</span></span><br><span class="line"><span class="function"><span class="number">004010</span>A3 <span class="number">83</span> C4 <span class="number">44</span>             add         esp,<span class="number">44</span>h</span></span><br><span class="line"><span class="function"><span class="number">004010</span>A6 <span class="number">3B</span> EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function"><span class="number">004010</span>A8 E8 <span class="number">13</span> <span class="number">01</span> <span class="number">00</span> <span class="number">00</span>       call        __chkesp (<span class="number">004011</span>c0)</span></span><br><span class="line"><span class="function"><span class="number">004010</span>AD <span class="number">8B</span> E5                mov         esp,ebp</span></span><br><span class="line"><span class="function"><span class="number">004010</span>AF <span class="number">5</span>D                   pop         ebp</span></span><br><span class="line"><span class="function"><span class="number">004010B</span>0 C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">//case顺序交换不影响大表的生成，即可以是无序的</span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230123113122801.png" alt="image-20230123113122801"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只要case连续且数目足够就会生成大表</span></span><br><span class="line"><span class="comment">//case连续没有空缺</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">301</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">302</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">303</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">304</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">305</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">306</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">307</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">308</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">309</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">310</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;sb&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D7D0 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D7D1 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D7D3 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D7D6 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D7D7 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D7D8 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D7D9 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D7DC B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D7E1 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D7E6 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"><span class="number">0040</span>D7E8 <span class="number">8B</span> <span class="number">45</span> <span class="number">08</span>             mov         eax,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">0040</span>D7EB <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040</span>D7EE <span class="number">8B</span> <span class="number">4</span>D FC             mov         ecx,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D7F1 <span class="number">81</span> E9 <span class="number">2</span>D <span class="number">01</span> <span class="number">00</span> <span class="number">00</span>    sub         ecx,<span class="number">12</span>Dh</span><br><span class="line"><span class="number">0040</span>D7F7 <span class="number">89</span> <span class="number">4</span>D FC             mov         dword ptr [ebp<span class="number">-4</span>],ecx</span><br><span class="line"><span class="number">0040</span>D7FA <span class="number">83</span> <span class="number">7</span>D FC <span class="number">09</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">9</span></span><br><span class="line"><span class="number">0040</span>D7FE <span class="number">0F</span> <span class="number">87</span> A6 <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>    ja          $L551+<span class="number">0F</span>h (<span class="number">0040</span>d8aa)</span><br><span class="line"><span class="number">0040</span>D804 <span class="number">8B</span> <span class="number">55</span> FC             mov         edx,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D807 FF <span class="number">24</span> <span class="number">95</span> C8 D8 <span class="number">40</span> <span class="number">00</span> jmp         dword ptr [edx*<span class="number">4</span>+<span class="number">40</span>D8C8h]</span><br><span class="line">$L533:</span><br><span class="line"><span class="number">0040</span>D80E <span class="number">68</span> C0 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;1&quot;</span> (<span class="number">00422f</span>c0)</span><br><span class="line"><span class="number">0040</span>D813 E8 <span class="number">28</span> <span class="number">39</span> <span class="function">FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D818 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D81B E9 97 00 00 00       jmp         $L551+1<span class="title">Ch</span> <span class="params">(<span class="number">0040</span>d8b7)</span></span></span><br><span class="line"><span class="function">$L535:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D820 <span class="number">68</span> BC <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;2&quot;</span> (<span class="number">00422f</span>bc)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D825 E8 <span class="number">16</span> <span class="number">39</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D82A <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D82D E9 <span class="number">85</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L537:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D832 <span class="number">68</span> B8 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;3&quot;</span> (<span class="number">00422f</span>b8)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D837 E8 <span class="number">04</span> <span class="number">39</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D83C <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D83F EB <span class="number">76</span>                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L539:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D841 <span class="number">68</span> B4 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;4&quot;</span> (<span class="number">00422f</span>b4)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D846 E8 F5 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D84B <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D84E EB <span class="number">67</span>                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L541:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D850 <span class="number">68</span> <span class="number">64</span> <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;5&quot;</span> (<span class="number">00422f</span>64)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D855 E8 E6 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85A <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85D EB <span class="number">58</span>                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L543:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85F <span class="number">68</span> <span class="number">3</span>C <span class="number">21</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;6&quot;</span> (<span class="number">0042213</span>c)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D864 E8 D7 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D869 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D86C EB <span class="number">49</span>                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L545:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D86E <span class="number">68</span> <span class="number">2</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;7&quot;</span> (<span class="number">0042202</span>c)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D873 E8 C8 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D878 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D87B EB <span class="number">3</span>A                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L547:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D87D <span class="number">68</span> <span class="number">28</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;8&quot;</span> (<span class="number">00422028</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D882 E8 B9 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D887 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D88A EB <span class="number">2B</span>                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L549:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D88C <span class="number">68</span> <span class="number">24</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;9&quot;</span> (<span class="number">00422024</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D891 E8 AA <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D896 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D899 EB <span class="number">1</span>C                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function">$L551:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D89B <span class="number">68</span> <span class="number">20</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;A&quot;</span> (<span class="number">00422020</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8A0 E8 <span class="number">9B</span> <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8A5 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8A8 EB <span class="number">0</span>D                jmp         $L551+<span class="number">1</span>Ch (<span class="number">0040</span>d8b7)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8AA <span class="number">68</span> <span class="number">1</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;sb&quot;</span> (<span class="number">0042201</span>c)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8AF E8 <span class="number">8</span>C <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B4 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B7 <span class="number">5F</span>                   pop         edi</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B8 <span class="number">5</span>E                   pop         esi</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B9 <span class="number">5B</span>                   pop         ebx</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8BA <span class="number">83</span> C4 <span class="number">44</span>             add         esp,<span class="number">44</span>h</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8BD <span class="number">3B</span> EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8BF E8 FC <span class="number">38</span> FF FF       call        __chkesp (<span class="number">004011</span>c0)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8C4 <span class="number">8B</span> E5                mov         esp,ebp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8C6 <span class="number">5</span>D                   pop         ebp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8C7 C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8C8  <span class="number">0</span>E D8 <span class="number">40</span> <span class="number">00</span>  .谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8CC  <span class="number">20</span> D8 <span class="number">40</span> <span class="number">00</span>   谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8D0  <span class="number">32</span> D8 <span class="number">40</span> <span class="number">00</span>  <span class="number">2</span>谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8D4  <span class="number">41</span> D8 <span class="number">40</span> <span class="number">00</span>  A谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8D8  <span class="number">50</span> D8 <span class="number">40</span> <span class="number">00</span>  P谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8DC  <span class="number">5F</span> D8 <span class="number">40</span> <span class="number">00</span>  _谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8E0  <span class="number">6</span>E D8 <span class="number">40</span> <span class="number">00</span>  n谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8E4  <span class="number">7</span>D D8 <span class="number">40</span> <span class="number">00</span>  &#125;谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8E8  <span class="number">8</span>C D8 <span class="number">40</span> <span class="number">00</span>  屫@.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8EC  <span class="number">9B</span> D8 <span class="number">40</span> <span class="number">00</span>  涁@.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">//case不连续且差值不大</span></span><br><span class="line"><span class="function">//如果中间出现不连续的case会用default补大表空缺 </span></span><br><span class="line"><span class="function">//空缺的地方会用case补，下面的两个<span class="number">0040</span>D886</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8A4  <span class="number">0</span>E D8 <span class="number">40</span> <span class="number">00</span>  .谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8A8  <span class="number">86</span> D8 <span class="number">40</span> <span class="number">00</span>  嗀@.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8AC  <span class="number">86</span> D8 <span class="number">40</span> <span class="number">00</span>  嗀@.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B0  <span class="number">1</span>D D8 <span class="number">40</span> <span class="number">00</span>  .谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B4  <span class="number">2</span>C D8 <span class="number">40</span> <span class="number">00</span>  ,谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D8B8  <span class="number">3B</span> D8 <span class="number">40</span> <span class="number">00</span>  ;</span>谸.</span><br><span class="line"><span class="number">0040</span>D8BC  <span class="number">4</span>A D8 <span class="number">40</span> <span class="number">00</span>  J谸.</span><br><span class="line"><span class="number">0040</span>D8C0  <span class="number">59</span> D8 <span class="number">40</span> <span class="number">00</span>  Y谸.</span><br><span class="line"><span class="number">0040</span>D8C4  <span class="number">68</span> D8 <span class="number">40</span> <span class="number">00</span>  h谸.</span><br><span class="line"><span class="number">0040</span>D8C8  <span class="number">77</span> D8 <span class="number">40</span> <span class="number">00</span>  w谸.</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果case不连续且差值过大 使用大表加小表</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">301</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">308</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">309</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">310</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;sb&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D7D0 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D7D1 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D7D3 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D7D6 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D7D7 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D7D8 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D7D9 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D7DC B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D7E1 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D7E6 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"><span class="number">0040</span>D7E8 <span class="number">8B</span> <span class="number">45</span> <span class="number">08</span>             mov         eax,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">0040</span>D7EB <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040</span>D7EE <span class="number">8B</span> <span class="number">4</span>D FC             mov         ecx,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D7F1 <span class="number">81</span> E9 <span class="number">2</span>D <span class="number">01</span> <span class="number">00</span> <span class="number">00</span>    sub         ecx,<span class="number">12</span>Dh</span><br><span class="line"><span class="number">0040</span>D7F7 <span class="number">89</span> <span class="number">4</span>D FC             mov         dword ptr [ebp<span class="number">-4</span>],ecx</span><br><span class="line"><span class="number">0040</span>D7FA <span class="number">83</span> <span class="number">7</span>D FC <span class="number">09</span>          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">9</span></span><br><span class="line"><span class="number">0040</span>D7FE <span class="number">77</span> <span class="number">4</span>E                ja          $L539+<span class="number">0F</span>h (<span class="number">0040</span>d84e)</span><br><span class="line"><span class="number">0040</span>D800 <span class="number">8B</span> <span class="number">45</span> FC             mov         eax,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D803 <span class="number">33</span> D2                <span class="keyword">xor</span>         edx,edx</span><br><span class="line"><span class="number">0040</span>D805 <span class="number">8</span>A <span class="number">90</span> <span class="number">80</span> D8 <span class="number">40</span> <span class="number">00</span>    mov         dl,<span class="function">byte <span class="title">ptr</span>  <span class="params">(<span class="number">0040</span>d880)</span>[eax]   <span class="comment">//内存0040d880中偏移量为[eax]的值</span></span></span><br><span class="line"><span class="function">0040D80B FF 24 95 6C D8 40 00 jmp         dword ptr [edx*4+40D86Ch]</span></span><br><span class="line"><span class="function">$L533:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D812 <span class="number">68</span> <span class="number">2</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;1&quot;</span> (<span class="number">0042202</span>c)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D817 E8 <span class="number">24</span> <span class="number">39</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D81C <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D81F EB <span class="number">3</span>A                jmp         $L539+<span class="number">1</span>Ch (<span class="number">0040</span>d85b)</span></span><br><span class="line"><span class="function">$L535:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D821 <span class="number">68</span> <span class="number">28</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;8&quot;</span> (<span class="number">00422028</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D826 E8 <span class="number">15</span> <span class="number">39</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D82B <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D82E EB <span class="number">2B</span>                jmp         $L539+<span class="number">1</span>Ch (<span class="number">0040</span>d85b)</span></span><br><span class="line"><span class="function">$L537:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D830 <span class="number">68</span> <span class="number">24</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;9&quot;</span> (<span class="number">00422024</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D835 E8 <span class="number">06</span> <span class="number">39</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D83A <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D83D EB <span class="number">1</span>C                jmp         $L539+<span class="number">1</span>Ch (<span class="number">0040</span>d85b)</span></span><br><span class="line"><span class="function">$L539:</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D83F <span class="number">68</span> <span class="number">20</span> <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;A&quot;</span> (<span class="number">00422020</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D844 E8 F7 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D849 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D84C EB <span class="number">0</span>D                jmp         $L539+<span class="number">1</span>Ch (<span class="number">0040</span>d85b)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D84E <span class="number">68</span> <span class="number">1</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;sb&quot;</span> (<span class="number">0042201</span>c)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D853 E8 E8 <span class="number">38</span> FF FF       call        printf (<span class="number">00401140</span>)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D858 <span class="number">83</span> C4 <span class="number">04</span>             add         esp,<span class="number">4</span></span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85B <span class="number">5F</span>                   pop         edi</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85C <span class="number">5</span>E                   pop         esi</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85D <span class="number">5B</span>                   pop         ebx</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D85E <span class="number">83</span> C4 <span class="number">44</span>             add         esp,<span class="number">44</span>h</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D861 <span class="number">3B</span> EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D863 E8 <span class="number">58</span> <span class="number">39</span> FF FF       call        __chkesp (<span class="number">004011</span>c0)</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D868 <span class="number">8B</span> E5                mov         esp,ebp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D86A <span class="number">5</span>D                   pop         ebp</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D86B C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="number">0040</span>D86C  <span class="number">12</span> D8 <span class="number">40</span> <span class="number">00</span>  .谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D870  <span class="number">21</span> D8 <span class="number">40</span> <span class="number">00</span>  !谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D874  <span class="number">30</span> D8 <span class="number">40</span> <span class="number">00</span>  <span class="number">0</span>谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D878  <span class="number">3F</span> D8 <span class="number">40</span> <span class="number">00</span>  ?谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D87C  <span class="number">4</span>E D8 <span class="number">40</span> <span class="number">00</span>  N谸.</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D880  <span class="number">00</span> <span class="number">04</span> <span class="number">04</span> <span class="number">04</span>  ....</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D884  <span class="number">04</span> <span class="number">04</span> <span class="number">04</span> <span class="number">01</span>  ....</span></span><br><span class="line"><span class="function"><span class="number">0040</span>D888  <span class="number">02</span> <span class="number">03</span> CC CC  ..烫</span></span><br><span class="line"><span class="function">//中间的<span class="number">04</span>就是代替大表中的default</span></span><br><span class="line"><span class="function">//如果空缺的太多会生成一张小表来替代大表中default填充，变为大表加小表</span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">//差值过大</span></span><br><span class="line"><span class="function">void func(int x)</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">	<span class="keyword">switch</span>(x)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1301</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5308</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">10309</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">20310</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;sb&quot;</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D7D0 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D7D1 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D7D3 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D7D6 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D7D7 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D7D8 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D7D9 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D7DC B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D7E1 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D7E6 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"><span class="number">0040</span>D7E8 <span class="number">8B</span> <span class="number">45</span> <span class="number">08</span>             mov         eax,dword ptr [ebp+<span class="number">8</span>]</span><br><span class="line"><span class="number">0040</span>D7EB <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040</span>D7EE <span class="number">81</span> <span class="number">7</span>D FC <span class="number">45</span> <span class="number">28</span> <span class="number">00</span> <span class="number">00</span> cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">2845</span>h</span><br><span class="line"><span class="number">0040</span>D7F5 <span class="number">7F</span> <span class="number">1</span>D                jg          func+<span class="number">44</span>h (<span class="number">0040</span>d814)</span><br><span class="line"><span class="number">0040</span>D7F7 <span class="number">81</span> <span class="number">7</span>D FC <span class="number">45</span> <span class="number">28</span> <span class="number">00</span> <span class="number">00</span> cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">2845</span>h</span><br><span class="line"><span class="number">0040</span>D7FE <span class="number">74</span> <span class="number">3</span>D                je          func+<span class="number">6</span>Dh (<span class="number">0040</span>d83d)</span><br><span class="line"><span class="number">0040</span>D800 <span class="number">81</span> <span class="number">7</span>D FC <span class="number">15</span> <span class="number">05</span> <span class="number">00</span> <span class="number">00</span> cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">515</span>h</span><br><span class="line"><span class="number">0040</span>D807 <span class="number">74</span> <span class="number">16</span>                je          func+<span class="number">4F</span>h (<span class="number">0040</span>d81f)</span><br><span class="line"><span class="number">0040</span>D809 <span class="number">81</span> <span class="number">7</span>D FC BC <span class="number">14</span> <span class="number">00</span> <span class="number">00</span> cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">14B</span>Ch</span><br><span class="line"><span class="number">0040</span>D810 <span class="number">74</span> <span class="number">1</span>C                je          func+<span class="number">5</span>Eh (<span class="number">0040</span>d82e)</span><br><span class="line"><span class="number">0040</span>D812 EB <span class="number">47</span>                jmp         func+<span class="number">8B</span>h (<span class="number">0040</span>d85b)</span><br><span class="line"><span class="number">0040</span>D814 <span class="number">81</span> <span class="number">7</span>D FC <span class="number">56</span> <span class="number">4F</span> <span class="number">00</span> <span class="number">00</span> cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">4F</span>56h</span><br><span class="line"><span class="number">0040</span>D81B <span class="number">74</span> <span class="number">2F</span>                je          func+<span class="number">7</span>Ch (<span class="number">0040</span>d84c)</span><br><span class="line"><span class="number">0040</span>D81D EB <span class="number">3</span>C                jmp         func+<span class="number">8B</span>h (<span class="number">0040</span>d85b)</span><br><span class="line"><span class="number">0040</span>D81F <span class="number">68</span> <span class="number">2</span>C <span class="number">20</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;1&quot;</span> (<span class="number">0042202</span>c)</span><br><span class="line"><span class="number">0040</span>D824 E8 <span class="number">17</span> <span class="number">39</span> <span class="function">FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D829 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D82C EB 3A                jmp         func+98<span class="title">h</span> <span class="params">(<span class="number">0040</span>d868)</span></span></span><br><span class="line"><span class="function">0040D82E 68 28 20 42 00       push        offset string &quot;8&quot; <span class="params">(<span class="number">00422028</span>)</span></span></span><br><span class="line"><span class="function">0040D833 E8 08 39 FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D838 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D83B EB 2B                jmp         func+98<span class="title">h</span> <span class="params">(<span class="number">0040</span>d868)</span></span></span><br><span class="line"><span class="function">0040D83D 68 24 20 42 00       push        offset string &quot;9&quot; <span class="params">(<span class="number">00422024</span>)</span></span></span><br><span class="line"><span class="function">0040D842 E8 F9 38 FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D847 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D84A EB 1C                jmp         func+98<span class="title">h</span> <span class="params">(<span class="number">0040</span>d868)</span></span></span><br><span class="line"><span class="function">0040D84C 68 20 20 42 00       push        offset string &quot;A&quot; <span class="params">(<span class="number">00422020</span>)</span></span></span><br><span class="line"><span class="function">0040D851 E8 EA 38 FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D856 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D859 EB 0D                jmp         func+98<span class="title">h</span> <span class="params">(<span class="number">0040</span>d868)</span></span></span><br><span class="line"><span class="function">0040D85B 68 1C 20 42 00       push        offset string &quot;sb&quot; <span class="params">(<span class="number">0042201</span>c)</span></span></span><br><span class="line"><span class="function">0040D860 E8 DB 38 FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D865 83 C4 04             add         esp,4</span></span><br><span class="line"><span class="function">0040D868 5F                   pop         edi</span></span><br><span class="line"><span class="function">0040D869 5E                   pop         esi</span></span><br><span class="line"><span class="function">0040D86A 5B                   pop         ebx</span></span><br><span class="line"><span class="function">0040D86B 83 C4 44             add         esp,44h</span></span><br><span class="line"><span class="function">0040D86E 3B EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function">0040D870 E8 4B 39 FF FF       call        __<span class="title">chkesp</span> <span class="params">(<span class="number">004011</span>c0)</span></span></span><br><span class="line"><span class="function">0040D875 8B E5                mov         esp,ebp</span></span><br><span class="line"><span class="function">0040D877 5D                   pop         ebp</span></span><br><span class="line"><span class="function">0040D878 C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="comment">//用case最大的-case最小的，得出的范围称为k，如果要判断的值-case最小的值不在范围k之内，直接default</span></span></span><br><span class="line"><span class="function"><span class="comment">//edx 存放的是a 与case 中最小值的差值，而eax*4+地址存放的是每个case的地址</span></span></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230123120353631.png" alt="image-20230123120353631"></p>
<h3 id="循环对比分析"><a class="markdownIt-Anchor" href="#循环对比分析">#</a> 循环对比分析</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D920 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D921 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D923 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D926 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D927 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D928 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D929 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D92C B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D931 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D936 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D938 C7 <span class="number">45</span> FC <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span>							;<span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="number">0040</span>D93F EB <span class="number">09</span>                jmp         func2+<span class="number">2</span>Ah (<span class="number">0040</span>d94a)</span><br><span class="line"><span class="number">0040</span>D941 <span class="number">8B</span> <span class="number">45</span> FC             mov         eax,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D944 <span class="number">83</span> C0 <span class="number">01</span>             add         eax,<span class="number">1</span></span><br><span class="line"><span class="number">0040</span>D947 <span class="number">89</span> <span class="number">45</span> FC             mov         dword ptr [ebp<span class="number">-4</span>],eax</span><br><span class="line"><span class="number">0040</span>D94A <span class="number">83</span> <span class="number">7</span>D FC <span class="number">0</span>A          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span>Ah							;i&lt;=<span class="number">10</span></span><br><span class="line"><span class="number">0040</span>D94E <span class="number">7F</span> <span class="number">13</span>                jg          func2+<span class="number">43</span>h (<span class="number">0040</span>d963)							;i&gt;<span class="number">10</span>,ret</span><br><span class="line"><span class="number">0040</span>D950 <span class="number">8B</span> <span class="number">4</span>D FC             mov         ecx,dword ptr [ebp<span class="number">-4</span>]							;i&lt;=<span class="number">10</span></span><br><span class="line"><span class="number">0040</span>D953 <span class="number">51</span>                   push        ecx											;ecx = i</span><br><span class="line"><span class="number">0040</span>D954 <span class="number">68</span> C4 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;%d\n&quot;</span> (<span class="number">00422f</span>c4)</span><br><span class="line"><span class="number">0040</span>D959 E8 E2 <span class="number">37</span> FF FF       call        <span class="built_in">printf</span> (<span class="number">00401140</span>)</span><br><span class="line"><span class="number">0040</span>D95E <span class="number">83</span> C4 <span class="number">08</span>             add         esp,<span class="number">8</span></span><br><span class="line"><span class="number">0040</span>D961 EB DE                jmp         func2+<span class="number">21</span>h (<span class="number">0040</span>d941)</span><br><span class="line"><span class="number">0040</span>D963 <span class="number">5F</span>                   pop         edi</span><br><span class="line"><span class="number">0040</span>D964 <span class="number">5</span>E                   pop         esi</span><br><span class="line"><span class="number">0040</span>D965 <span class="number">5B</span>                   pop         ebx</span><br><span class="line"><span class="number">0040</span>D966 <span class="number">83</span> C4 <span class="number">44</span>             add         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D969 <span class="number">3B</span> EC                cmp         ebp,esp</span><br><span class="line"><span class="number">0040</span>D96B E8 <span class="number">50</span> <span class="number">38</span> FF FF       call        __chkesp (<span class="number">004011</span>c0)</span><br><span class="line"><span class="number">0040</span>D970 <span class="number">8B</span> E5                mov         esp,ebp</span><br><span class="line"><span class="number">0040</span>D972 <span class="number">5</span>D                   pop         ebp</span><br><span class="line"><span class="number">0040</span>D973 C3                   ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="built_in">func3</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=<span class="number">10</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D980 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D981 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D983 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D986 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D987 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D988 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D989 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D98C B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D991 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D996 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D998 C7 <span class="number">45</span> FC <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span></span><br><span class="line"><span class="number">0040</span>D99F <span class="number">83</span> <span class="number">7</span>D FC <span class="number">0</span>A          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span>Ah</span><br><span class="line"><span class="number">0040</span>D9A3 <span class="number">7F</span> <span class="number">1</span>C                jg          func3+<span class="number">41</span>h (<span class="number">0040</span>d9c1)</span><br><span class="line"><span class="number">0040</span>D9A5 <span class="number">8B</span> <span class="number">45</span> FC             mov         eax,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D9A8 <span class="number">50</span>                   push        eax</span><br><span class="line"><span class="number">0040</span>D9A9 <span class="number">68</span> C4 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;%d\n&quot;</span> (<span class="number">00422f</span>c4)</span><br><span class="line"><span class="number">0040</span>D9AE E8 <span class="number">8</span>D <span class="number">37</span> <span class="function">FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D9B3 83 C4 08             add         esp,8</span></span><br><span class="line"><span class="function">0040D9B6 8B 4D FC             mov         ecx,dword ptr [ebp-4]</span></span><br><span class="line"><span class="function">0040D9B9 83 C1 01             add         ecx,1</span></span><br><span class="line"><span class="function">0040D9BC 89 4D FC             mov         dword ptr [ebp-4],ecx</span></span><br><span class="line"><span class="function">0040D9BF EB DE                jmp         func3+1<span class="title">Fh</span> <span class="params">(<span class="number">0040</span>d99f)</span></span></span><br><span class="line"><span class="function">0040D9C1 5F                   pop         edi</span></span><br><span class="line"><span class="function">0040D9C2 5E                   pop         esi</span></span><br><span class="line"><span class="function">0040D9C3 5B                   pop         ebx</span></span><br><span class="line"><span class="function">0040D9C4 83 C4 44             add         esp,44h</span></span><br><span class="line"><span class="function">0040D9C7 3B EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function">0040D9C9 E8 F2 37 FF FF       call        __<span class="title">chkesp</span> <span class="params">(<span class="number">004011</span>c0)</span></span></span><br><span class="line"><span class="function">0040D9CE 8B E5                mov         esp,ebp</span></span><br><span class="line"><span class="function">0040D9D0 5D                   pop         ebp</span></span><br><span class="line"><span class="function">0040D9D1 C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>);</span><br><span class="line">		i++;</span><br><span class="line">	&#125;<span class="keyword">while</span>(i&lt;=<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">0040</span>D980 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D981 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D983 <span class="number">83</span> EC <span class="number">44</span>             sub         esp,<span class="number">44</span>h</span><br><span class="line"><span class="number">0040</span>D986 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D987 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D988 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D989 <span class="number">8</span>D <span class="number">7</span>D BC             lea         edi,[ebp<span class="number">-44</span>h]</span><br><span class="line"><span class="number">0040</span>D98C B9 <span class="number">11</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">11</span>h</span><br><span class="line"><span class="number">0040</span>D991 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D996 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">    </span><br><span class="line"><span class="number">0040</span>D998 C7 <span class="number">45</span> FC <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span></span><br><span class="line"><span class="number">0040</span>D99F <span class="number">83</span> <span class="number">7</span>D FC <span class="number">0</span>A          cmp         dword ptr [ebp<span class="number">-4</span>],<span class="number">0</span>Ah</span><br><span class="line"><span class="number">0040</span>D9A3 <span class="number">7F</span> <span class="number">1</span>C                jg          func3+<span class="number">41</span>h (<span class="number">0040</span>d9c1)</span><br><span class="line"><span class="number">0040</span>D9A5 <span class="number">8B</span> <span class="number">45</span> FC             mov         eax,dword ptr [ebp<span class="number">-4</span>]</span><br><span class="line"><span class="number">0040</span>D9A8 <span class="number">50</span>                   push        eax</span><br><span class="line"><span class="number">0040</span>D9A9 <span class="number">68</span> C4 <span class="number">2F</span> <span class="number">42</span> <span class="number">00</span>       push        offset string <span class="string">&quot;%d\n&quot;</span> (<span class="number">00422f</span>c4)</span><br><span class="line"><span class="number">0040</span>D9AE E8 <span class="number">8</span>D <span class="number">37</span> <span class="function">FF FF       call        <span class="title">printf</span> <span class="params">(<span class="number">00401140</span>)</span></span></span><br><span class="line"><span class="function">0040D9B3 83 C4 08             add         esp,8</span></span><br><span class="line"><span class="function">0040D9B6 8B 4D FC             mov         ecx,dword ptr [ebp-4]</span></span><br><span class="line"><span class="function">0040D9B9 83 C1 01             add         ecx,1</span></span><br><span class="line"><span class="function">0040D9BC 89 4D FC             mov         dword ptr [ebp-4],ecx</span></span><br><span class="line"><span class="function">0040D9BF EB DE                jmp         func3+1<span class="title">Fh</span> <span class="params">(<span class="number">0040</span>d99f)</span></span></span><br><span class="line"><span class="function">0040D9C1 5F                   pop         edi</span></span><br><span class="line"><span class="function">0040D9C2 5E                   pop         esi</span></span><br><span class="line"><span class="function">0040D9C3 5B                   pop         ebx</span></span><br><span class="line"><span class="function">0040D9C4 83 C4 44             add         esp,44h</span></span><br><span class="line"><span class="function">0040D9C7 3B EC                cmp         ebp,esp</span></span><br><span class="line"><span class="function">0040D9C9 E8 F2 37 FF FF       call        __<span class="title">chkesp</span> <span class="params">(<span class="number">004011</span>c0)</span></span></span><br><span class="line"><span class="function">0040D9CE 8B E5                mov         esp,ebp</span></span><br><span class="line"><span class="function">0040D9D0 5D                   pop         ebp</span></span><br><span class="line"><span class="function">0040D9D1 C3                   ret</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>
<h3 id="指针"><a class="markdownIt-Anchor" href="#指针">#</a> 指针</h3>
<p>总结:<br>
1、带有 <code>*</code>  的变量类型的标准写法: <code>变量类型* 变量名</code></p>
<p>2、任何类型都可以带 <code>*</code>  加上 <code>*</code>  以后是新的类型</p>
<p>3、* 可以是任意多个</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//赋值</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">int</span> a;</span><br><span class="line">	<span class="type">int</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span>* x;</span><br><span class="line">	<span class="type">short</span>* y;</span><br><span class="line">	<span class="type">int</span>* z;</span><br><span class="line">	Stu* stu;</span><br><span class="line">	<span class="type">int</span>** a;</span><br><span class="line"></span><br><span class="line">	x = (<span class="type">char</span>*)<span class="number">1</span>;</span><br><span class="line">	y = (<span class="type">short</span>*)<span class="number">2</span>;</span><br><span class="line">	z = (<span class="type">int</span>*)<span class="number">3</span>;</span><br><span class="line">	stu = (Stu*)<span class="number">4</span>;</span><br><span class="line">	a = (<span class="type">int</span>**)<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="number">0040</span>D740 <span class="number">55</span>                   push        ebp</span><br><span class="line"><span class="number">0040</span>D741 <span class="number">8B</span> EC                mov         ebp,esp</span><br><span class="line"><span class="number">0040</span>D743 <span class="number">83</span> EC <span class="number">54</span>             sub         esp,<span class="number">54</span>h</span><br><span class="line"><span class="number">0040</span>D746 <span class="number">53</span>                   push        ebx</span><br><span class="line"><span class="number">0040</span>D747 <span class="number">56</span>                   push        esi</span><br><span class="line"><span class="number">0040</span>D748 <span class="number">57</span>                   push        edi</span><br><span class="line"><span class="number">0040</span>D749 <span class="number">8</span>D <span class="number">7</span>D AC             lea         edi,[ebp<span class="number">-54</span>h]</span><br><span class="line"><span class="number">0040</span>D74C B9 <span class="number">15</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span>       mov         ecx,<span class="number">15</span>h</span><br><span class="line"><span class="number">0040</span>D751 B8 CC CC CC CC       mov         eax,<span class="number">0</span>CCCCCCCCh</span><br><span class="line"><span class="number">0040</span>D756 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"><span class="number">0040</span>D758 C7 <span class="number">45</span> FC <span class="number">01</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-4</span>],<span class="number">1</span></span><br><span class="line"><span class="number">0040</span>D75F C7 <span class="number">45</span> F8 <span class="number">02</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-8</span>],<span class="number">2</span></span><br><span class="line"><span class="number">0040</span>D766 C7 <span class="number">45</span> F4 <span class="number">03</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-0</span>Ch],<span class="number">3</span></span><br><span class="line"><span class="number">0040</span>D76D C7 <span class="number">45</span> F0 <span class="number">04</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-10</span>h],<span class="number">4</span></span><br><span class="line"><span class="number">0040</span>D774 C7 <span class="number">45</span> EC <span class="number">05</span> <span class="number">00</span> <span class="number">00</span> <span class="number">00</span> mov         dword ptr [ebp<span class="number">-14</span>h],<span class="number">5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//带*类型变量赋值必须使用完整写法</span></span><br><span class="line"><span class="comment">//不加家多少个*，宽度永远是4字节</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//++/--加多少取决于类型减去一个*之后的数据宽度</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">func2</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span>* x;</span><br><span class="line">	<span class="type">short</span>* y;</span><br><span class="line">	<span class="type">int</span>* z;</span><br><span class="line"></span><br><span class="line">	x = (<span class="type">char</span>*)<span class="number">1</span>;</span><br><span class="line">	y = (<span class="type">short</span>*)<span class="number">2</span>;</span><br><span class="line">	z = (<span class="type">int</span>*)<span class="number">3</span>;</span><br><span class="line">	</span><br><span class="line">	x++;</span><br><span class="line">	y++;</span><br><span class="line">	z++;</span><br><span class="line">	<span class="comment">//2,4,7</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,x,y,z);</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span>** x1;</span><br><span class="line">	<span class="type">short</span>** y1;</span><br><span class="line">	<span class="type">int</span>** z1;</span><br><span class="line"></span><br><span class="line">	x1 = (<span class="type">char</span>**)<span class="number">1</span>;</span><br><span class="line">	y1 = (<span class="type">short</span>**)<span class="number">2</span>;</span><br><span class="line">	z1 = (<span class="type">int</span>**)<span class="number">3</span>;</span><br><span class="line">	</span><br><span class="line">	x1++;</span><br><span class="line">	y1++;</span><br><span class="line">	z1++;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,x1,y1,z1);</span><br><span class="line">	<span class="comment">//5,6,7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">	<span class="type">char</span>* x;</span><br><span class="line">	<span class="type">short</span>* y;</span><br><span class="line">	<span class="type">int</span>* z;</span><br><span class="line"></span><br><span class="line">	x = (<span class="type">char</span>*)<span class="number">100</span>;</span><br><span class="line">	y = (<span class="type">short</span>*)<span class="number">100</span>;</span><br><span class="line">	z = (<span class="type">int</span>*)<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">	x+=<span class="number">5</span>;</span><br><span class="line">	y+=<span class="number">5</span>;</span><br><span class="line">	z+=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,x,y,z);  <span class="comment">//105 110 120</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="type">char</span>**** x;</span><br><span class="line">	<span class="type">short</span>**** y;</span><br><span class="line">	<span class="type">int</span>**** z;</span><br><span class="line"></span><br><span class="line">	x = (<span class="type">char</span>****)<span class="number">100</span>;</span><br><span class="line">	y = (<span class="type">short</span>****)<span class="number">100</span>;</span><br><span class="line">	z = (<span class="type">int</span>****)<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">	x+=<span class="number">5</span>;</span><br><span class="line">	y+=<span class="number">5</span>;</span><br><span class="line">	z+=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,x,y,z);  <span class="comment">//120,120,120</span></span><br><span class="line">总结:</span><br><span class="line"><span class="number">1.</span>带*类型的变量可以加、减一个整数，但不能乘或者除.</span><br><span class="line"><span class="number">2.</span>带*类型变量与其他整数相加或者相减时:</span><br><span class="line"><span class="comment">//带*类型变量＋N=带*类型变量+N(去掉一个*后类型的宽度)</span></span><br><span class="line"><span class="comment">//带*类型变量一N=带*类型变量–N(去掉一个*后类型的宽度)</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">	char**** x;</span><br><span class="line">	char**** y;</span><br><span class="line"></span><br><span class="line">	x = (char****)200;</span><br><span class="line">	y = (char****)100;</span><br><span class="line"></span><br><span class="line">	int a = x-y; </span><br><span class="line"></span><br><span class="line">	printf(&quot;%d \n&quot;,a);  //25</span><br><span class="line">	</span><br><span class="line">	char* x;</span><br><span class="line">	char* y;</span><br><span class="line"></span><br><span class="line">	x = (char*)200;</span><br><span class="line">	y = (char*)100;</span><br><span class="line"></span><br><span class="line">	int a = x-y;  //char*相减结果为int</span><br><span class="line"></span><br><span class="line">	printf(&quot;%d \n&quot;,a); //100</span><br><span class="line">	</span><br><span class="line">	short* x;</span><br><span class="line">	short* y;</span><br><span class="line"></span><br><span class="line">	x = (short*)200;</span><br><span class="line">	y = (short*)100;</span><br><span class="line"></span><br><span class="line">	int a = x-y; </span><br><span class="line"></span><br><span class="line">	printf(&quot;%d \n&quot;,a);   //50</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">总结:</span><br><span class="line">1、两个类型相同的带*类型的变量可以进行减法操作</span><br><span class="line">2、想减的结果要除以去掉一个*的数据的宽度.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//带*的类型可以做大小比较</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	short**** x;</span><br><span class="line">	short**** y;</span><br><span class="line"></span><br><span class="line">	x = (short****)200;</span><br><span class="line">	y = (short****)100;</span><br><span class="line"></span><br><span class="line">	if(x&gt;y)</span><br><span class="line">		printf(&quot;1&quot;);    //1</span><br><span class="line">	else</span><br><span class="line">		printf(&quot;2&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">char** arr[10]    //40</span><br><span class="line">0040D740 55                   push        ebp</span><br><span class="line">0040D741 8B EC                mov         ebp,esp</span><br><span class="line">0040D743 83 EC 68             sub         esp,68h    //0x68-0x40=0x28=40/4=10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct Student</span><br><span class="line">&#123;</span><br><span class="line">	int x;</span><br><span class="line">	int y;</span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line">Student**** s;</span><br><span class="line">s = (Student****)100;</span><br><span class="line">s++;  //104</span><br><span class="line">s += 2;  //112</span><br><span class="line">s -= 3;  //100</span><br><span class="line">s += 2.5;  //pointer on left; needs integral value on right</span><br><span class="line"></span><br><span class="line">Student**** s1;</span><br><span class="line">Student**** s2;</span><br><span class="line">int x;</span><br><span class="line">s1 = (Student****)200;</span><br><span class="line">s2 = (Student****)100;</span><br><span class="line">x = s1-s2;  //25</span><br><span class="line"></span><br><span class="line">Student* s;</span><br><span class="line">s = (Student*)100;</span><br><span class="line">s++;  //108</span><br><span class="line">s+=2;  //124</span><br><span class="line">s-=3;  //100</span><br><span class="line"></span><br><span class="line">Student* s1;</span><br><span class="line">Student* s2;</span><br><span class="line">int x;</span><br><span class="line">s1 = (Student*)200;</span><br><span class="line">s2 = (Student*)100;</span><br><span class="line">x=s1-s2  //12</span><br><span class="line"></span><br><span class="line">void func2()</span><br><span class="line">&#123;</span><br><span class="line">#if 0</span><br><span class="line">	Student**** s;</span><br><span class="line">	s = (Student****)100;</span><br><span class="line">	s++;  </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line">	s += 2;  </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line">	s -= 3; </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line"></span><br><span class="line">	Student**** s1;</span><br><span class="line">	Student**** s2;</span><br><span class="line">	int x;</span><br><span class="line">	s1 = (Student****)200;</span><br><span class="line">	s2 = (Student****)100;</span><br><span class="line">	x = s1-s2; </span><br><span class="line">	printf(&quot;%d\n&quot;,x);</span><br><span class="line"></span><br><span class="line">	Student* s;</span><br><span class="line">	s = (Student*)100;</span><br><span class="line">	s++;  </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line">	s+=2;  </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line">	s-=3;  </span><br><span class="line">	printf(&quot;%d\n&quot;,s);</span><br><span class="line"></span><br><span class="line">	Student* s1;</span><br><span class="line">	Student* s2;</span><br><span class="line">	int x;</span><br><span class="line">	s1 = (Student*)200;</span><br><span class="line">	s2 = (Student*)100;</span><br><span class="line">	x=s1-s2;  </span><br><span class="line">	printf(&quot;%d\n&quot;,x);</span><br><span class="line"></span><br><span class="line">	#endif</span><br><span class="line">&#125;</span><br><span class="line">Student**** 4</span><br><span class="line">Student* 8</span><br><span class="line"></span><br><span class="line">Student s;</span><br><span class="line">int x = (Studnet)s;   //x</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int* x;</span><br><span class="line">Student* y;</span><br><span class="line">x = (int*) 10;</span><br><span class="line">y = (Student*)x;    //可以转</span><br><span class="line"></span><br><span class="line">int* x;</span><br><span class="line">Student y;</span><br><span class="line">x = (Studnet*)y;   //不能转</span><br><span class="line"></span><br><span class="line">&amp;是地址符，类型是其后面的类型加一个“*”，任何变量都可以使用来获取地址，但不能用在常量上。</span><br><span class="line"></span><br><span class="line">&amp;a 的类型时a的类型+*</span><br><span class="line">char***** a = (char*****)10;</span><br><span class="line">&amp;a = char******</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230125132226542.png" alt="image-20230125132226542"></p>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230125133522040.png" alt="image-20230125133522040"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int  x=10;</span><br><span class="line">int* px = &amp;x;</span><br><span class="line">char x1 = *px;</span><br><span class="line">*x == x的类型减去一个*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int* x = &amp;arr[0];</span><br><span class="line">int* px = arr;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">void func3()</span><br><span class="line">&#123;</span><br><span class="line">	char a = 10;</span><br><span class="line">	short b = 20;</span><br><span class="line">	int c = 30;</span><br><span class="line"></span><br><span class="line">	char* pa = &amp;a;</span><br><span class="line">	short* pb = &amp;b;</span><br><span class="line">	int* pc = &amp;c;</span><br><span class="line"></span><br><span class="line">	char** ppa = &amp;pa;</span><br><span class="line">	short** ppb = &amp;pb;</span><br><span class="line">	int** ppc = &amp;pc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">0040D740 55                   push        ebp</span><br><span class="line">0040D741 8B EC                mov         ebp,esp</span><br><span class="line">0040D743 83 EC 64             sub         esp,64h</span><br><span class="line">0040D746 53                   push        ebx</span><br><span class="line">0040D747 56                   push        esi</span><br><span class="line">0040D748 57                   push        edi</span><br><span class="line">0040D749 8D 7D 9C             lea         edi,[ebp-64h]</span><br><span class="line">0040D74C B9 19 00 00 00       mov         ecx,19h</span><br><span class="line">0040D751 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">0040D756 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line"></span><br><span class="line">0040D758 C6 45 FC 0A          mov         byte ptr [ebp-4],0Ah</span><br><span class="line">0040D75C 66 C7 45 F8 14 00    mov         word ptr [ebp-8],offset func3+20h (0040d760)</span><br><span class="line">0040D762 C7 45 F4 1E 00 00 00 mov         dword ptr [ebp-0Ch],1Eh</span><br><span class="line">0040D769 8D 45 FC             lea         eax,[ebp-4]</span><br><span class="line">0040D76C 89 45 F0             mov         dword ptr [ebp-10h],eax</span><br><span class="line">0040D76F 8D 4D F8             lea         ecx,[ebp-8]</span><br><span class="line">0040D772 89 4D EC             mov         dword ptr [ebp-14h],ecx</span><br><span class="line">0040D775 8D 55 F4             lea         edx,[ebp-0Ch]</span><br><span class="line">0040D778 89 55 E8             mov         dword ptr [ebp-18h],edx</span><br><span class="line">0040D77B 8D 45 F0             lea         eax,[ebp-10h]</span><br><span class="line">0040D77E 89 45 E4             mov         dword ptr [ebp-1Ch],eax</span><br><span class="line">0040D781 8D 4D EC             lea         ecx,[ebp-14h]</span><br><span class="line">0040D784 89 4D E0             mov         dword ptr [ebp-20h],ecx</span><br><span class="line">0040D787 8D 55 E8             lea         edx,[ebp-18h]</span><br><span class="line">0040D78A 89 55 DC             mov         dword ptr [ebp-24h],edx</span><br><span class="line">0040D78D 5F                   pop         edi</span><br><span class="line">0040D78E 5E                   pop         esi</span><br><span class="line">0040D78F 5B                   pop         ebx</span><br><span class="line">0040D790 8B E5                mov         esp,ebp</span><br><span class="line">0040D792 5D                   pop         ebp</span><br><span class="line">0040D793 C3                   ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void func4()</span><br><span class="line">&#123;</span><br><span class="line">	int p = 10;</span><br><span class="line">	int******* p7;</span><br><span class="line">	int****** p6;</span><br><span class="line">	int***** p5;</span><br><span class="line">	int**** p4;</span><br><span class="line">	int*** p3;</span><br><span class="line">	int** p2;</span><br><span class="line">	int* p1;</span><br><span class="line"></span><br><span class="line">	p1 = &amp;p;</span><br><span class="line">	p2 = &amp;p1;</span><br><span class="line">	p3 = &amp;p2;</span><br><span class="line">	p4 = &amp;p3;</span><br><span class="line">	p5 = &amp;p4;</span><br><span class="line">	p6 = &amp;p5;</span><br><span class="line">	p7 = &amp;p6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">0040D870 55                   push        ebp</span><br><span class="line">0040D871 8B EC                mov         ebp,esp</span><br><span class="line">0040D873 83 EC 60             sub         esp,60h</span><br><span class="line">0040D876 53                   push        ebx</span><br><span class="line">0040D877 56                   push        esi</span><br><span class="line">0040D878 57                   push        edi</span><br><span class="line">0040D879 8D 7D A0             lea         edi,[ebp-60h]</span><br><span class="line">0040D87C B9 18 00 00 00       mov         ecx,18h</span><br><span class="line">0040D881 B8 CC CC CC CC       mov         eax,0CCCCCCCCh</span><br><span class="line">0040D886 F3 AB                rep stos    dword ptr [edi]</span><br><span class="line">0040D888 C7 45 FC 0A 00 00 00 mov         dword ptr [ebp-4],0Ah</span><br><span class="line">0040D88F 8D 45 FC             lea         eax,[ebp-4]</span><br><span class="line">0040D892 89 45 E0             mov         dword ptr [ebp-20h],eax</span><br><span class="line">0040D895 8D 4D E0             lea         ecx,[ebp-20h]</span><br><span class="line">0040D898 89 4D E4             mov         dword ptr [ebp-1Ch],ecx</span><br><span class="line">0040D89B 8D 55 E4             lea         edx,[ebp-1Ch]</span><br><span class="line">0040D89E 89 55 E8             mov         dword ptr [ebp-18h],edx</span><br><span class="line">0040D8A1 8D 45 E8             lea         eax,[ebp-18h]</span><br><span class="line">0040D8A4 89 45 EC             mov         dword ptr [ebp-14h],eax</span><br><span class="line">0040D8A7 8D 4D EC             lea         ecx,[ebp-14h]</span><br><span class="line">0040D8AA 89 4D F0             mov         dword ptr [ebp-10h],ecx</span><br><span class="line">0040D8AD 8D 55 F0             lea         edx,[ebp-10h]</span><br><span class="line">0040D8B0 89 55 F4             mov         dword ptr [ebp-0Ch],edx</span><br><span class="line">0040D8B3 8D 45 F4             lea         eax,[ebp-0Ch]</span><br><span class="line">0040D8B6 89 45 F8             mov         dword ptr [ebp-8],eax</span><br><span class="line">0040D8B9 5F                   pop         edi</span><br><span class="line">0040D8BA 5E                   pop         esi</span><br><span class="line">0040D8BB 5B                   pop         ebx</span><br><span class="line">0040D8BC 8B E5                mov         esp,ebp</span><br><span class="line">0040D8BE 5D                   pop         ebp</span><br><span class="line">0040D8BF C3                   ret</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230126121202168.png" alt="image-20230126121202168"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> names[] = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line">==</span><br><span class="line"><span class="type">char</span> arr[<span class="number">6</span>] = &#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;0&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="type">char</span>* x = <span class="string">&quot;China&quot;</span>;   <span class="comment">//char*指向的字符串不能改，因为存储在常量区，char*的地址可以改</span></span><br><span class="line"><span class="type">char</span> y[] = <span class="string">&quot;China&quot;</span>;  <span class="comment">//全局区</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">char</span>* x = <span class="string">&quot;china&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="type">char</span>* y = <span class="string">&quot;china&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	*(x+<span class="number">1</span>) = <span class="string">&quot;A&quot;</span>;    <span class="comment">//不能修改常量区</span></span><br><span class="line">	</span><br><span class="line">	y[<span class="number">1</span>] = <span class="string">&#x27;A&#x27;</span>;    <span class="comment">//常量区的内容复制到局部变量中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strlen</span><span class="params">(<span class="type">char</span>* s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(*(s) != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        ret++;</span><br><span class="line">        s++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strcpy</span><span class="params">(<span class="type">char</span>* dest, <span class="type">char</span>* src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span>* ret = dest;</span><br><span class="line">    <span class="keyword">while</span>(*(dest++) = *(src)++);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strcat</span><span class="params">(<span class="type">char</span>* dest, <span class="type">char</span>* src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span>* ret = dest;</span><br><span class="line"> 	<span class="keyword">while</span>(*dest != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dest++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(*dest++ = *src++);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strcmp</span><span class="params">(<span class="type">char</span>*s1, <span class="type">char</span>* s2)</span> <span class="comment">//一样返回0，不一样返回1</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(*s1!=<span class="number">0</span> &amp;&amp; *s2!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(*s1++ != *s2++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">FindRoleNameAddr</span><span class="params">(<span class="type">char</span>* pData, <span class="type">char</span>* pRoleName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span>* ret = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(pData)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="https://kbshire-1308981697.cos.ap-shanghai.myqcloud.com/img/image-20230126151524978.png" alt="image-20230126151524978"></p>

      <div class="tags">
          <a href="/tags/%E9%80%86%E5%90%91/" rel="tag"><i class="ic i-tag"></i> 逆向</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2023-01-27 12:08:05" itemprop="dateModified" datetime="2023-01-27T12:08:05+08:00">2023-01-27</time>
  </span>
</div>

      
<div class="reward">
  <button><i class="ic i-heartbeat"></i> Donate</button>
  <p>Give me a cup of [coffee]~(￣▽￣)~*</p>
  <div id="qr">
      
      <div>
        <img data-src="/images/wechatpay.png" alt="John Doe WeChat Pay">
        <p>WeChat Pay</p>
      </div>
      
      <div>
        <img data-src="/images/alipay.png" alt="John Doe Alipay">
        <p>Alipay</p>
      </div>
      
      <div>
        <img data-src="/images/paypal.png" alt="John Doe PayPal">
        <p>PayPal</p>
      </div>
  </div>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>Post author:  </strong>John Doe <i class="ic i-at"><em>@</em></i>Hexo
  </li>
  <li class="link">
    <strong>Post link: </strong>
    <a href="http://example.com/2023/01/03/%E6%BB%B4%E6%B0%B4reverse/" title="水滴rev">http://example.com/2023/01/03/滴水reverse/</a>
  </li>
  <li class="license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2022/12/31/webshell/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeun65urj20zk0m81ii.jpg" title="webshell">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> web安全</span>
  <h3>webshell</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/01/20/VXLAN/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipexe4oykj20zk0m87ji.jpg" title="VXLAN">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>VXLAN</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#reverse"><span class="toc-number">1.</span> <span class="toc-text"> reverse</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AC%E5%BC%80%E8%AF%BE"><span class="toc-number">1.1.</span> <span class="toc-text"> 公开课</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E5%88%B6"><span class="toc-number">1.2.</span> <span class="toc-text"> 进制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%BD%E5%BA%A6"><span class="toc-number">1.3.</span> <span class="toc-text"> 数据宽度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">1.4.</span> <span class="toc-text"> 寄存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98"><span class="toc-number">1.5.</span> <span class="toc-text"> 内存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E6%A0%88"><span class="toc-number">1.6.</span> <span class="toc-text"> 堆栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jcc"><span class="toc-number">1.7.</span> <span class="toc-text"> JCC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jcc-2"><span class="toc-number">1.8.</span> <span class="toc-text"> JCC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E6%A0%88%E5%9B%BE"><span class="toc-number">1.9.</span> <span class="toc-text"> 堆栈图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.</span> <span class="toc-text"> 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#c%E8%AF%AD%E8%A8%80"><span class="toc-number">1.11.</span> <span class="toc-text"> C 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vc60"><span class="toc-number">1.11.1.</span> <span class="toc-text"> VC6.0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.11.2.</span> <span class="toc-text"> 数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A0%81"><span class="toc-number">1.11.3.</span> <span class="toc-text"> 编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E5%86%85%E5%AD%98"><span class="toc-number">1.11.4.</span> <span class="toc-text"> 程序内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.11.5.</span> <span class="toc-text"> if 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.11.6.</span> <span class="toc-text"> 循环语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">1.11.7.</span> <span class="toc-text"> 结构体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typedef"><span class="toc-number">1.11.8.</span> <span class="toc-text"> typedef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch"><span class="toc-number">1.11.9.</span> <span class="toc-text"> Switch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%AF%B9%E6%AF%94%E5%88%86%E6%9E%90"><span class="toc-number">1.11.10.</span> <span class="toc-text"> 循环对比分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">1.11.11.</span> <span class="toc-text"> 指针</span></a></li></ol></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/2022/11/01/%E6%B1%87%E7%BC%96/" rel="bookmark" title="汇编">汇编</a></li><li><a href="/2022/11/11/reverse/" rel="bookmark" title="逆向">逆向</a></li><li class="active"><a href="/2023/01/03/%E6%BB%B4%E6%B0%B4reverse/" rel="bookmark" title="水滴rev">水滴rev</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="John Doe"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">John Doe</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">22</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">4</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">5</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2022/12/31/webshell/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/01/20/VXLAN/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>Random Posts</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/12/27/SSTI/" title="SSTI">SSTI</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%86%85%E7%BD%91/" title="In 内网">内网</a>
</div>

    <span><a href="/2022/05/27/emergency%20response/" title="应急响应">应急响应</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/08/16/Unserialize/" title="unserialize">unserialize</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/05/17/include/" title="file include">file include</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/11/27/CDN/" title="CDN&amp;DNS">CDN&DNS</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/12/31/webshell/" title="webshell">webshell</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%A7%8B%E6%8B%9B/" title="In 秋招">秋招</a>
</div>

    <span><a href="/2022/10/27/%E7%A7%8B%E6%8B%9B%E6%80%BB%E7%BB%93/" title="秋招总结">秋招总结</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/06/27/SSRF/" title="SSRF">SSRF</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/web%E5%AE%89%E5%85%A8/" title="In web安全">web安全</a>
</div>

    <span><a href="/2022/05/27/CSRF/" title="CSRF">CSRF</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2023/01/20/VXLAN/" title="VXLAN">VXLAN</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>Recent Comments</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">John Doe @ Yume Shoka</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/01/03/滴水reverse/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    copyright: 'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
